/*! ingress-model-viewer 20-09-2015 */

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.IMV=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){!function(b){"use strict";var c={};"undefined"==typeof d?"function"==typeof a&&"object"==typeof a.amd&&a.amd?(c.exports={},a(function(){return c.exports})):c.exports="undefined"!=typeof window?window:b:c.exports=d,function(a){if(!b)var b=1e-6;if(!c)var c="undefined"!=typeof Float32Array?Float32Array:Array;if(!d)var d=Math.random;var e={};e.setMatrixArrayType=function(a){c=a},"undefined"!=typeof a&&(a.glMatrix=e);var f=Math.PI/180;e.toRadian=function(a){return a*f};var g={};g.create=function(){var a=new c(2);return a[0]=0,a[1]=0,a},g.clone=function(a){var b=new c(2);return b[0]=a[0],b[1]=a[1],b},g.fromValues=function(a,b){var d=new c(2);return d[0]=a,d[1]=b,d},g.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},g.set=function(a,b,c){return a[0]=b,a[1]=c,a},g.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},g.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},g.sub=g.subtract,g.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},g.mul=g.multiply,g.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},g.div=g.divide,g.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},g.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a},g.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},g.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},g.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},g.dist=g.distance,g.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},g.sqrDist=g.squaredDistance,g.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},g.len=g.length,g.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},g.sqrLen=g.squaredLength,g.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},g.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},g.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},g.cross=function(a,b,c){var d=b[0]*c[1]-b[1]*c[0];return a[0]=a[1]=0,a[2]=d,a},g.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},g.random=function(a,b){b=b||1;var c=2*d()*Math.PI;return a[0]=Math.cos(c)*b,a[1]=Math.sin(c)*b,a},g.transformMat2=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e,a[1]=c[1]*d+c[3]*e,a},g.transformMat2d=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},g.transformMat3=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[3]*e+c[6],a[1]=c[1]*d+c[4]*e+c[7],a},g.transformMat4=function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[4]*e+c[12],a[1]=c[1]*d+c[5]*e+c[13],a},g.forEach=function(){var a=g.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=2),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],f(a,a,g),b[h]=a[0],b[h+1]=a[1];return b}}(),g.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},"undefined"!=typeof a&&(a.vec2=g);var h={};h.create=function(){var a=new c(3);return a[0]=0,a[1]=0,a[2]=0,a},h.clone=function(a){var b=new c(3);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},h.fromValues=function(a,b,d){var e=new c(3);return e[0]=a,e[1]=b,e[2]=d,e},h.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a},h.set=function(a,b,c,d){return a[0]=b,a[1]=c,a[2]=d,a},h.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a},h.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a},h.sub=h.subtract,h.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a},h.mul=h.multiply,h.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a},h.div=h.divide,h.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a},h.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a},h.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a},h.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a},h.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},h.dist=h.distance,h.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e},h.sqrDist=h.squaredDistance,h.length=function(a){var b=a[0],c=a[1],d=a[2];return Math.sqrt(b*b+c*c+d*d)},h.len=h.length,h.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];return b*b+c*c+d*d},h.sqrLen=h.squaredLength,h.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a},h.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*c+d*d+e*e;return f>0&&(f=1/Math.sqrt(f),a[0]=b[0]*f,a[1]=b[1]*f,a[2]=b[2]*f),a},h.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},h.cross=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2];return a[0]=e*i-f*h,a[1]=f*g-d*i,a[2]=d*h-e*g,a},h.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a},h.random=function(a,b){b=b||1;var c=2*d()*Math.PI,e=2*d()-1,f=Math.sqrt(1-e*e)*b;return a[0]=Math.cos(c)*f,a[1]=Math.sin(c)*f,a[2]=e*b,a},h.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12],a[1]=c[1]*d+c[5]*e+c[9]*f+c[13],a[2]=c[2]*d+c[6]*e+c[10]*f+c[14],a},h.transformMat3=function(a,b,c){var d=b[0],e=b[1],f=b[2];return a[0]=d*c[0]+e*c[3]+f*c[6],a[1]=d*c[1]+e*c[4]+f*c[7],a[2]=d*c[2]+e*c[5]+f*c[8],a},h.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},h.rotateX=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0],f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d),f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},h.rotateY=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d),f[1]=e[1],f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d),a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},h.rotateZ=function(a,b,c,d){var e=[],f=[];return e[0]=b[0]-c[0],e[1]=b[1]-c[1],e[2]=b[2]-c[2],f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d),f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d),f[2]=e[2],a[0]=f[0]+c[0],a[1]=f[1]+c[1],a[2]=f[2]+c[2],a},h.forEach=function(){var a=h.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=3),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}(),h.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"},"undefined"!=typeof a&&(a.vec3=h);var i={};i.create=function(){var a=new c(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a},i.clone=function(a){var b=new c(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},i.fromValues=function(a,b,d,e){var f=new c(4);return f[0]=a,f[1]=b,f[2]=d,f[3]=e,f},i.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},i.set=function(a,b,c,d,e){return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a},i.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a[2]=b[2]+c[2],a[3]=b[3]+c[3],a},i.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a[2]=b[2]-c[2],a[3]=b[3]-c[3],a},i.sub=i.subtract,i.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a[2]=b[2]*c[2],a[3]=b[3]*c[3],a},i.mul=i.multiply,i.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a[2]=b[2]/c[2],a[3]=b[3]/c[3],a},i.div=i.divide,i.min=function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a[2]=Math.min(b[2],c[2]),a[3]=Math.min(b[3],c[3]),a},i.max=function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a[2]=Math.max(b[2],c[2]),a[3]=Math.max(b[3],c[3]),a},i.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c,a[3]=b[3]*c,a},i.scaleAndAdd=function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a[2]=b[2]+c[2]*d,a[3]=b[3]+c[3]*d,a},i.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return Math.sqrt(c*c+d*d+e*e+f*f)},i.dist=i.distance,i.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f},i.sqrDist=i.squaredDistance,i.length=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return Math.sqrt(b*b+c*c+d*d+e*e)},i.len=i.length,i.squaredLength=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];return b*b+c*c+d*d+e*e},i.sqrLen=i.squaredLength,i.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=-b[3],a},i.normalize=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f;return g>0&&(g=1/Math.sqrt(g),a[0]=b[0]*g,a[1]=b[1]*g,a[2]=b[2]*g,a[3]=b[3]*g),a},i.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},i.lerp=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a[2]=g+d*(c[2]-g),a[3]=h+d*(c[3]-h),a},i.random=function(a,b){return b=b||1,a[0]=d(),a[1]=d(),a[2]=d(),a[3]=d(),i.normalize(a,a),i.scale(a,a,b),a},i.transformMat4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3];return a[0]=c[0]*d+c[4]*e+c[8]*f+c[12]*g,a[1]=c[1]*d+c[5]*e+c[9]*f+c[13]*g,a[2]=c[2]*d+c[6]*e+c[10]*f+c[14]*g,a[3]=c[3]*d+c[7]*e+c[11]*f+c[15]*g,a},i.transformQuat=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=c[0],h=c[1],i=c[2],j=c[3],k=j*d+h*f-i*e,l=j*e+i*d-g*f,m=j*f+g*e-h*d,n=-g*d-h*e-i*f;return a[0]=k*j+n*-g+l*-i-m*-h,a[1]=l*j+n*-h+m*-g-k*-i,a[2]=m*j+n*-i+k*-h-l*-g,a},i.forEach=function(){var a=i.create();return function(b,c,d,e,f,g){var h,i;for(c||(c=4),d||(d=0),i=e?Math.min(e*c+d,b.length):b.length,h=d;i>h;h+=c)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],f(a,a,g),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}(),i.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},"undefined"!=typeof a&&(a.vec4=i);var j={};j.create=function(){var a=new c(4);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},j.clone=function(a){var b=new c(4);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},j.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a},j.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},j.transpose=function(a,b){if(a===b){var c=b[1];a[1]=b[2],a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},j.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*f-e*d;return g?(g=1/g,a[0]=f*g,a[1]=-d*g,a[2]=-e*g,a[3]=c*g,a):null},j.adjoint=function(a,b){var c=b[0];return a[0]=b[3],a[1]=-b[1],a[2]=-b[2],a[3]=c,a},j.determinant=function(a){return a[0]*a[3]-a[2]*a[1]},j.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*h+f*i,a[1]=e*h+g*i,a[2]=d*j+f*k,a[3]=e*j+g*k,a},j.mul=j.multiply,j.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+f*h,a[1]=e*i+g*h,a[2]=d*-h+f*i,a[3]=e*-h+g*i,a},j.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1];return a[0]=d*h,a[1]=e*h,a[2]=f*i,a[3]=g*i,a},j.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},j.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))},j.LDU=function(a,b,c,d){return a[2]=d[2]/d[0],c[0]=d[0],c[1]=d[1],c[3]=d[3]-a[2]*c[1],[a,b,c]},"undefined"!=typeof a&&(a.mat2=j);var k={};k.create=function(){var a=new c(6);return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},k.clone=function(a){var b=new c(6);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b},k.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},k.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},k.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=c*f-d*e;return i?(i=1/i,a[0]=f*i,a[1]=-d*i,a[2]=-e*i,a[3]=c*i,a[4]=(e*h-f*g)*i,a[5]=(d*g-c*h)*i,a):null},k.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},k.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1],l=c[2],m=c[3],n=c[4],o=c[5];return a[0]=d*j+f*k,a[1]=e*j+g*k,a[2]=d*l+f*m,a[3]=e*l+g*m,a[4]=d*n+f*o+h,a[5]=e*n+g*o+i,a},k.mul=k.multiply,k.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+f*j,a[1]=e*k+g*j,a[2]=d*-j+f*k,a[3]=e*-j+g*k,a[4]=h,a[5]=i,a},k.scale=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d*j,a[1]=e*j,a[2]=f*k,a[3]=g*k,a[4]=h,a[5]=i,a},k.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=c[0],k=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=d*j+f*k+h,a[5]=e*j+g*k+i,a},k.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"},k.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)},"undefined"!=typeof a&&(a.mat2d=k);var l={};l.create=function(){var a=new c(9);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},l.fromMat4=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[4],a[4]=b[5],a[5]=b[6],a[6]=b[8],a[7]=b[9],a[8]=b[10],a},l.clone=function(a){var b=new c(9);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},l.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},l.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},l.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3],a[2]=b[6],a[3]=c,a[5]=b[7],a[6]=d,a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},l.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,o=c*l+d*m+e*n;return o?(o=1/o,a[0]=l*o,a[1]=(-k*d+e*j)*o,a[2]=(h*d-e*g)*o,a[3]=m*o,a[4]=(k*c-e*i)*o,a[5]=(-h*c+e*f)*o,a[6]=n*o,a[7]=(-j*c+d*i)*o,a[8]=(g*c-d*f)*o,a):null},l.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8];return a[0]=g*k-h*j,a[1]=e*j-d*k,a[2]=d*h-e*g,a[3]=h*i-f*k,a[4]=c*k-e*i,a[5]=e*f-c*h,a[6]=f*j-g*i,a[7]=d*i-c*j,a[8]=c*g-d*f,a},l.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8];return b*(j*f-g*i)+c*(-j*e+g*h)+d*(i*e-f*h)},l.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8];return a[0]=m*d+n*g+o*j,a[1]=m*e+n*h+o*k,a[2]=m*f+n*i+o*l,a[3]=p*d+q*g+r*j,a[4]=p*e+q*h+r*k,a[5]=p*f+q*i+r*l,a[6]=s*d+t*g+u*j,a[7]=s*e+t*h+u*k,a[8]=s*f+t*i+u*l,a},l.mul=l.multiply,l.translate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=c[0],n=c[1];return a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=m*d+n*g+j,a[7]=m*e+n*h+k,a[8]=m*f+n*i+l,a},l.rotate=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=Math.sin(c),n=Math.cos(c);return a[0]=n*d+m*g,a[1]=n*e+m*h,a[2]=n*f+m*i,a[3]=n*g-m*d,a[4]=n*h-m*e,a[5]=n*i-m*f,a[6]=j,a[7]=k,a[8]=l,a},l.scale=function(a,b,c){var d=c[0],e=c[1];return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=e*b[3],a[4]=e*b[4],a[5]=e*b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a},l.fromMat2d=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=0,a[3]=b[2],a[4]=b[3],a[5]=0,a[6]=b[4],a[7]=b[5],a[8]=1,a},l.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[3]=k-r,a[6]=m+q,a[1]=k+r,a[4]=1-j-o,a[7]=n-p,a[2]=m-q,a[5]=n+p,a[8]=1-j-l,a},l.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(i*A-g*D-j*z)*E,a[2]=(g*C-h*A+j*y)*E,a[3]=(e*C-d*D-f*B)*E,a[4]=(c*D-e*A+f*z)*E,a[5]=(d*A-c*C-f*y)*E,a[6]=(p*x-q*w+r*v)*E,a[7]=(q*u-o*x-r*t)*E,a[8]=(o*w-p*u+r*s)*E,a):null},l.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"},l.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))},"undefined"!=typeof a&&(a.mat3=l);var m={};m.create=function(){var a=new c(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},m.clone=function(a){var b=new c(16);return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},m.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},m.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},m.transpose=function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],f=b[6],g=b[7],h=b[11];a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=c,a[6]=b[9],a[7]=b[13],a[8]=d,a[9]=f,a[11]=b[14],a[12]=e,a[13]=g,a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},m.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,a[0]=(h*D-i*C+j*B)*E,a[1]=(e*C-d*D-f*B)*E,a[2]=(p*x-q*w+r*v)*E,a[3]=(m*w-l*x-n*v)*E,a[4]=(i*A-g*D-j*z)*E,a[5]=(c*D-e*A+f*z)*E,a[6]=(q*u-o*x-r*t)*E,a[7]=(k*x-m*u+n*t)*E,a[8]=(g*C-h*A+j*y)*E,a[9]=(d*A-c*C-f*y)*E,a[10]=(o*w-p*u+r*s)*E,a[11]=(l*u-k*w-n*s)*E,a[12]=(h*z-g*B-i*y)*E,a[13]=(c*B-d*z+e*y)*E,a[14]=(p*t-o*v-q*s)*E,a[15]=(k*v-l*t+m*s)*E,a):null},m.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=b[8],l=b[9],m=b[10],n=b[11],o=b[12],p=b[13],q=b[14],r=b[15];return a[0]=h*(m*r-n*q)-l*(i*r-j*q)+p*(i*n-j*m),a[1]=-(d*(m*r-n*q)-l*(e*r-f*q)+p*(e*n-f*m)),a[2]=d*(i*r-j*q)-h*(e*r-f*q)+p*(e*j-f*i),a[3]=-(d*(i*n-j*m)-h*(e*n-f*m)+l*(e*j-f*i)),a[4]=-(g*(m*r-n*q)-k*(i*r-j*q)+o*(i*n-j*m)),a[5]=c*(m*r-n*q)-k*(e*r-f*q)+o*(e*n-f*m),a[6]=-(c*(i*r-j*q)-g*(e*r-f*q)+o*(e*j-f*i)),a[7]=c*(i*n-j*m)-g*(e*n-f*m)+k*(e*j-f*i),a[8]=g*(l*r-n*p)-k*(h*r-j*p)+o*(h*n-j*l),a[9]=-(c*(l*r-n*p)-k*(d*r-f*p)+o*(d*n-f*l)),a[10]=c*(h*r-j*p)-g*(d*r-f*p)+o*(d*j-f*h),a[11]=-(c*(h*n-j*l)-g*(d*n-f*l)+k*(d*j-f*h)),a[12]=-(g*(l*q-m*p)-k*(h*q-i*p)+o*(h*m-i*l)),a[13]=c*(l*q-m*p)-k*(d*q-e*p)+o*(d*m-e*l),a[14]=-(c*(h*q-i*p)-g*(d*q-e*p)+o*(d*i-e*h)),a[15]=c*(h*m-i*l)-g*(d*m-e*l)+k*(d*i-e*h),a},m.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14],q=a[15],r=b*g-c*f,s=b*h-d*f,t=b*i-e*f,u=c*h-d*g,v=c*i-e*g,w=d*i-e*h,x=j*o-k*n,y=j*p-l*n,z=j*q-m*n,A=k*p-l*o,B=k*q-m*o,C=l*q-m*p;return r*C-s*B+t*A+u*z-v*y+w*x},m.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=c[0],u=c[1],v=c[2],w=c[3];return a[0]=t*d+u*h+v*l+w*p,a[1]=t*e+u*i+v*m+w*q,a[2]=t*f+u*j+v*n+w*r,a[3]=t*g+u*k+v*o+w*s,t=c[4],u=c[5],v=c[6],w=c[7],a[4]=t*d+u*h+v*l+w*p,a[5]=t*e+u*i+v*m+w*q,a[6]=t*f+u*j+v*n+w*r,a[7]=t*g+u*k+v*o+w*s,t=c[8],u=c[9],v=c[10],w=c[11],a[8]=t*d+u*h+v*l+w*p,a[9]=t*e+u*i+v*m+w*q,a[10]=t*f+u*j+v*n+w*r,a[11]=t*g+u*k+v*o+w*s,t=c[12],u=c[13],v=c[14],w=c[15],a[12]=t*d+u*h+v*l+w*p,a[13]=t*e+u*i+v*m+w*q,a[14]=t*f+u*j+v*n+w*r,a[15]=t*g+u*k+v*o+w*s,a},m.mul=m.multiply,m.translate=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=c[0],q=c[1],r=c[2];return b===a?(a[12]=b[0]*p+b[4]*q+b[8]*r+b[12],a[13]=b[1]*p+b[5]*q+b[9]*r+b[13],a[14]=b[2]*p+b[6]*q+b[10]*r+b[14],a[15]=b[3]*p+b[7]*q+b[11]*r+b[15]):(d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],i=b[5],j=b[6],k=b[7],l=b[8],m=b[9],n=b[10],o=b[11],a[0]=d,a[1]=e,a[2]=f,a[3]=g,a[4]=h,a[5]=i,a[6]=j,a[7]=k,a[8]=l,a[9]=m,a[10]=n,a[11]=o,a[12]=d*p+h*q+l*r+b[12],a[13]=e*p+i*q+m*r+b[13],a[14]=f*p+j*q+n*r+b[14],a[15]=g*p+k*q+o*r+b[15]),a},m.scale=function(a,b,c){var d=c[0],e=c[1],f=c[2];return a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d,a[4]=b[4]*e,a[5]=b[5]*e,a[6]=b[6]*e,a[7]=b[7]*e,a[8]=b[8]*f,a[9]=b[9]*f,a[10]=b[10]*f,a[11]=b[11]*f,a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},m.rotate=function(a,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=e[0],E=e[1],F=e[2],G=Math.sqrt(D*D+E*E+F*F);return Math.abs(G)<b?null:(G=1/G,D*=G,E*=G,F*=G,f=Math.sin(d),g=Math.cos(d),h=1-g,i=c[0],j=c[1],k=c[2],l=c[3],m=c[4],n=c[5],o=c[6],p=c[7],q=c[8],r=c[9],s=c[10],t=c[11],u=D*D*h+g,v=E*D*h+F*f,w=F*D*h-E*f,x=D*E*h-F*f,y=E*E*h+g,z=F*E*h+D*f,A=D*F*h+E*f,B=E*F*h-D*f,C=F*F*h+g,a[0]=i*u+m*v+q*w,a[1]=j*u+n*v+r*w,a[2]=k*u+o*v+s*w,a[3]=l*u+p*v+t*w,a[4]=i*x+m*y+q*z,a[5]=j*x+n*y+r*z,a[6]=k*x+o*y+s*z,a[7]=l*x+p*y+t*z,a[8]=i*A+m*B+q*C,a[9]=j*A+n*B+r*C,a[10]=k*A+o*B+s*C,a[11]=l*A+p*B+t*C,c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]),a)},m.rotateX=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[4],g=b[5],h=b[6],i=b[7],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[4]=f*e+j*d,a[5]=g*e+k*d,a[6]=h*e+l*d,a[7]=i*e+m*d,a[8]=j*e-f*d,a[9]=k*e-g*d,a[10]=l*e-h*d,a[11]=m*e-i*d,a},m.rotateY=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[8],k=b[9],l=b[10],m=b[11];return b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e-j*d,a[1]=g*e-k*d,a[2]=h*e-l*d,a[3]=i*e-m*d,a[8]=f*d+j*e,a[9]=g*d+k*e,a[10]=h*d+l*e,a[11]=i*d+m*e,a},m.rotateZ=function(a,b,c){var d=Math.sin(c),e=Math.cos(c),f=b[0],g=b[1],h=b[2],i=b[3],j=b[4],k=b[5],l=b[6],m=b[7];return b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]),a[0]=f*e+j*d,a[1]=g*e+k*d,a[2]=h*e+l*d,a[3]=i*e+m*d,a[4]=j*e-f*d,a[5]=k*e-g*d,a[6]=l*e-h*d,a[7]=m*e-i*d,a},m.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=d+d,i=e+e,j=f+f,k=d*h,l=d*i,m=d*j,n=e*i,o=e*j,p=f*j,q=g*h,r=g*i,s=g*j;return a[0]=1-(n+p),a[1]=l+s,a[2]=m-r,a[3]=0,a[4]=l-s,a[5]=1-(k+p),a[6]=o+q,a[7]=0,a[8]=m+r,a[9]=o-q,a[10]=1-(k+n),a[11]=0,a[12]=c[0],a[13]=c[1],a[14]=c[2],a[15]=1,a},m.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c+c,h=d+d,i=e+e,j=c*g,k=d*g,l=d*h,m=e*g,n=e*h,o=e*i,p=f*g,q=f*h,r=f*i;return a[0]=1-l-o,a[1]=k+r,a[2]=m-q,a[3]=0,a[4]=k-r,a[5]=1-j-o,a[6]=n+p,a[7]=0,a[8]=m+q,a[9]=n-p,a[10]=1-j-l,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},m.frustum=function(a,b,c,d,e,f,g){var h=1/(c-b),i=1/(e-d),j=1/(f-g);return a[0]=2*f*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=2*f*i,a[6]=0,a[7]=0,a[8]=(c+b)*h,a[9]=(e+d)*i,a[10]=(g+f)*j,a[11]=-1,a[12]=0,a[13]=0,a[14]=g*f*2*j,a[15]=0,a},m.perspective=function(a,b,c,d,e){var f=1/Math.tan(b/2),g=1/(d-e);return a[0]=f/c,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=f,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(e+d)*g,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*e*d*g,a[15]=0,a},m.ortho=function(a,b,c,d,e,f,g){var h=1/(b-c),i=1/(d-e),j=1/(f-g);return a[0]=-2*h,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*i,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*j,a[11]=0,a[12]=(b+c)*h,a[13]=(e+d)*i,a[14]=(g+f)*j,a[15]=1,a},m.lookAt=function(a,c,d,e){var f,g,h,i,j,k,l,n,o,p,q=c[0],r=c[1],s=c[2],t=e[0],u=e[1],v=e[2],w=d[0],x=d[1],y=d[2];return Math.abs(q-w)<b&&Math.abs(r-x)<b&&Math.abs(s-y)<b?m.identity(a):(l=q-w,n=r-x,o=s-y,p=1/Math.sqrt(l*l+n*n+o*o),l*=p,n*=p,o*=p,f=u*o-v*n,g=v*l-t*o,h=t*n-u*l,p=Math.sqrt(f*f+g*g+h*h),p?(p=1/p,f*=p,g*=p,h*=p):(f=0,g=0,h=0),i=n*h-o*g,j=o*f-l*h,k=l*g-n*f,p=Math.sqrt(i*i+j*j+k*k),p?(p=1/p,i*=p,j*=p,k*=p):(i=0,j=0,k=0),a[0]=f,a[1]=i,a[2]=l,a[3]=0,a[4]=g,a[5]=j,a[6]=n,a[7]=0,a[8]=h,a[9]=k,a[10]=o,a[11]=0,a[12]=-(f*q+g*r+h*s),a[13]=-(i*q+j*r+k*s),a[14]=-(l*q+n*r+o*s),a[15]=1,a)},m.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"},m.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))},"undefined"!=typeof a&&(a.mat4=m);var n={};n.create=function(){var a=new c(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},n.rotationTo=function(){var a=h.create(),b=h.fromValues(1,0,0),c=h.fromValues(0,1,0);return function(d,e,f){var g=h.dot(e,f);return-.999999>g?(h.cross(a,b,e),h.length(a)<1e-6&&h.cross(a,c,e),h.normalize(a,a),n.setAxisAngle(d,a,Math.PI),d):g>.999999?(d[0]=0,d[1]=0,d[2]=0,d[3]=1,d):(h.cross(a,e,f),d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=1+g,n.normalize(d,d))}}(),n.setAxes=function(){var a=l.create();return function(b,c,d,e){return a[0]=d[0],a[3]=d[1],a[6]=d[2],a[1]=e[0],a[4]=e[1],a[7]=e[2],a[2]=-c[0],a[5]=-c[1],a[8]=-c[2],n.normalize(b,n.fromMat3(b,a))}}(),n.clone=i.clone,n.fromValues=i.fromValues,n.copy=i.copy,n.set=i.set,n.identity=function(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},n.setAxisAngle=function(a,b,c){c=.5*c;var d=Math.sin(c);return a[0]=d*b[0],a[1]=d*b[1],a[2]=d*b[2],a[3]=Math.cos(c),a},n.add=i.add,n.multiply=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=c[0],i=c[1],j=c[2],k=c[3];return a[0]=d*k+g*h+e*j-f*i,a[1]=e*k+g*i+f*h-d*j,a[2]=f*k+g*j+d*i-e*h,a[3]=g*k-d*h-e*i-f*j,a},n.mul=n.multiply,n.scale=i.scale,n.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+g*h,a[1]=e*i+f*h,a[2]=f*i-e*h,a[3]=g*i-d*h,a},n.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i-f*h,a[1]=e*i+g*h,a[2]=f*i+d*h,a[3]=g*i-e*h,a},n.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2],g=b[3],h=Math.sin(c),i=Math.cos(c);return a[0]=d*i+e*h,a[1]=e*i-d*h,a[2]=f*i+g*h,a[3]=g*i-f*h,a},n.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];return a[0]=c,a[1]=d,a[2]=e,a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a},n.dot=i.dot,n.lerp=i.lerp,n.slerp=function(a,b,c,d){var e,f,g,h,i,j=b[0],k=b[1],l=b[2],m=b[3],n=c[0],o=c[1],p=c[2],q=c[3];return f=j*n+k*o+l*p+m*q,0>f&&(f=-f,n=-n,o=-o,p=-p,q=-q),1-f>1e-6?(e=Math.acos(f),g=Math.sin(e),h=Math.sin((1-d)*e)/g,i=Math.sin(d*e)/g):(h=1-d,i=d),a[0]=h*j+i*n,a[1]=h*k+i*o,a[2]=h*l+i*p,a[3]=h*m+i*q,a},n.invert=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=c*c+d*d+e*e+f*f,h=g?1/g:0;return a[0]=-c*h,a[1]=-d*h,a[2]=-e*h,a[3]=f*h,a},n.conjugate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a[2]=-b[2],a[3]=b[3],a},n.length=i.length,n.len=n.length,n.squaredLength=i.squaredLength,n.sqrLen=n.squaredLength,n.normalize=i.normalize,n.fromMat3=function(a,b){var c,d=b[0]+b[4]+b[8];if(d>0)c=Math.sqrt(d+1),a[3]=.5*c,c=.5/c,a[0]=(b[7]-b[5])*c,a[1]=(b[2]-b[6])*c,a[2]=(b[3]-b[1])*c;else{var e=0;b[4]>b[0]&&(e=1),b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,g=(e+2)%3;c=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*g+g]+1),a[e]=.5*c,c=.5/c,a[3]=(b[3*g+f]-b[3*f+g])*c,a[f]=(b[3*f+e]+b[3*e+f])*c,a[g]=(b[3*g+e]+b[3*e+g])*c}return a},n.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"},"undefined"!=typeof a&&(a.quat=n)}(c.exports)}(this)},{}],2:[function(b,c,d){(function(e){!function(b){if("object"==typeof d&&"undefined"!=typeof c)c.exports=b();else if("function"==typeof a&&a.amd)a([],b);else{var f;f="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:this,f.JavaDeserializer=b()}}(function(){return function a(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof b&&b;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b?b:a)},l,l.exports,a,c,d,e)}return d[h].exports}for(var g="function"==typeof b&&b,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./stream-reader"),h=d(g),i=44269,j=5,k=112,l=113,m=114,n=116,o=117,p=119,q=120,r=8257536,s=function(){function a(b){e(this,a),this.buffer=b,this.stream=new h["default"](b),this.repr=null,this.refs=[],this._checkMagic()}return f(a,[{key:"_checkMagic",value:function(){if(this.stream.readUint16()!==i)throw"invalid magic number!";if(this.stream.readUint16()!==j)throw"invalid version!"}},{key:"_readClassDescription",value:function(){var a="BCDFIJSZ",b=this.stream.readUint8(),c={};if(b!==k){if(b===l){var d=this.stream.readUint32()-r;return this.refs[d]}if(b!==m)return void console.log("I don't know how to handle this type yet: "+b);c.name=this.stream.readUtf8String(),c.versionId=[this.stream.readUint32(),this.stream.readUint32()],c.handle=this.refs.length,c.flags=this.stream.readUint8();for(var e=[],f=this.stream.readUint16(),g=0;f>g;g++){var h={};h.type=this.stream.readUint8(),h.name=this.stream.readUtf8String(),-1===a.indexOf(String.fromCharCode(h.type))&&console.log("this is not a primitive type: "+h.type),e.push(h)}return c.fields=e,c.annotation=this.stream.readUint8(),c.annotation!==q&&console.log("I don't know what to do with this: "+c.annotation),c.superClass=this._readClassDescription(),this.refs.push(c),c}}},{key:"_readArray",value:function(){var a,b,c={},d=this._readClassDescription();c.description=d,c.handle=this.refs.length,b=this.stream.readUint32();var e=d.name;if("[F"===e)c.elements=this.stream.readFloat32Array(b);else if("[S"===e)c.elements=this.stream.readUint16Array(b);else for(c.elements=[],a=0;b>a;a++){var f=this._readChunk();c.elements.push(f)}return this.refs.push(c),c}},{key:"_readBlockData",value:function(){var a=this.stream.readUint8();return this.stream.readUint8Array(a)}},{key:"_readChunk",value:function(){var a=this.stream.readUint8(),b=null;switch(a){case o:b=this._readArray();break;case p:b=this._readBlockData();break;case n:b=this.stream.readUtf8String();break;default:console.log("unhandled type")}return b}},{key:"getContents",value:function(){if(this.repr)return this.repr;for(this.repr=[];this.stream.getPosition()<this.stream.getLength();)this.repr.push(this._readChunk());return this.repr}}]),a}();s.VERSION="0.2.0",c["default"]=s,b.exports=c["default"]},{"./stream-reader":2}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,
d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.buffer=b,this.dataview=new DataView(b),this.currentOffset=0}return e(a,[{key:"getLength",value:function(){return this.dataview.byteLength}},{key:"getPosition",value:function(){return this.currentOffset}},{key:"readUint32",value:function(){var a=this.dataview.getUint32(this.currentOffset);return this.currentOffset+=4,a}},{key:"readUint16",value:function(){var a=this.dataview.getUint16(this.currentOffset);return this.currentOffset+=2,a}},{key:"readUint8",value:function(){var a=this.dataview.getUint8(this.currentOffset);return this.currentOffset++,a}},{key:"readInt32",value:function(){var a=this.dataview.getInt32(this.currentOffset);return this.currentOffset+=4,a}},{key:"readInt16",value:function(){var a=this.dataview.getInt16(this.currentOffset);return this.currentOffset+=2,a}},{key:"readInt8",value:function(){var a=this.dataview.getInt8(this.currentOffset);return this.currentOffset++,a}},{key:"readFloat32",value:function(){var a=this.dataview.getFloat32(this.currentOffset);return this.currentOffset+=4,a}},{key:"readUtf8String",value:function(){for(var a=this.readUint16(),b="",c=0;a>c;c++)b+=String.fromCharCode(this.readUint8());return b}},{key:"readFloat32Array",value:function(a){for(var b=new Float32Array(a),c=0;a>c;c++)b[c]=this.readFloat32();return b}},{key:"readUint16Array",value:function(a){for(var b=new Uint16Array(a),c=0;a>c;c++)b[c]=this.readUint16();return b}},{key:"readUint8Array",value:function(a){var b=new Uint8Array(this.buffer,this.currentOffset,a);return this.currentOffset+=a,b}}]),a}();c["default"]=f,b.exports=c["default"]},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(b,c,d){!function(b,e){if("function"==typeof a&&a.amd)a(["exports","module"],e);else if("undefined"!=typeof d&&"undefined"!=typeof c)e(d,c);else{var f={exports:{}};e(f.exports,f),b.libtga=f.exports}}(this,function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d=18,e=0,f=1,g=2,h=3,i=8,j=15,k=48,l=192,m=2,n=1,o=2,p=1,q=function s(a){c(this,s),this.dataview=new DataView(a),this.header=s.readHeader(this.dataview),this.width=this.header.imageSpec.width,this.height=this.header.imageSpec.height,this.compressed=!!(this.header.imageType&i),this.imageId=s.readImageId(this.dataview,this.header),this.colorMap=s.readColorMap(this.dataview,this.header),this.imageData=s.readImage(this)};q.HEADER_SIZE=d,q.IMAGE_TYPE_NONE=e,q.IMAGE_TYPE_COLORMAPPED=f,q.IMAGE_TYPE_TRUECOLOR=g,q.IMAGE_TYPE_GREYSCALE=h,q.IMAGE_RUNLENGTH_ENCODED=i,q.readHeader=function(a){var b={idLength:a.getUint8(0,!0),mapType:a.getUint8(1,!0),imageType:a.getUint8(2,!0),colorMapSpec:q.readColorMapSpec(a,3),imageSpec:q.readImageSpec(a,8)};return b},q.readColorMapSpec=function(a,b){var c=a.getUint8(b+4,!0),d={firstEntry:a.getUint16(b,!0),length:a.getUint16(b+2,!0),entrySizeBits:c,entrySizeBytes:Math.floor((c+7)/8)};return d},q.readImageSpec=function(a,b){var c=a.getUint8(b+9),d={xOrigin:a.getUint16(b,!0),yOrigin:a.getUint16(b+2,!0),width:a.getUint16(b+4,!0),height:a.getUint16(b+6,!0),pixelDepth:a.getUint8(b+8),descriptor:c,attributeBits:c&j,origin:(c&k)>>4,interleave:(c&l)>>6};return d},q.readImageId=function(a,b){return new Uint8Array(a.buffer,d,b.idLength)},q.readColorMap=function(a,b){if(b.colorMapSpec.length<=0)return null;var c=new Uint8ClampedArray(4*b.colorMapSpec.length),e=null,f=d+b.idLength;switch(b.colorMapSpec.entrySizeBits){case 8:e=q.readPixel8;break;case 16:e=q.readPixel15;break;case 15:e=q.readPixel16;break;case 24:e=q.readPixel24;break;case 32:e=q.readPixel32;break;default:throw"Unsupported pixel depth"}for(var g=0;g<b.colorMapSpec.length;g++)e(a,f,g,c,g);return c},q.readPixel8=function(a,b,c,d,e){var f=a.getUint8(b+c);d[4*e+2]=f,d[4*e+1]=f,d[4*e+0]=f,d[4*e+3]=255},q.readPixel15=function(a,b,c,d,e){var f=a.getUint16(b+2*c,!0);d[4*e+2]=(31&f)<<3,d[4*e+1]=(f>>5&31)<<3,d[4*e+0]=(f>>10&31)<<3,d[4*e+3]=255},q.readPixel16=function(a,b,c,d,e){var f=a.getUint16(b+2*c,!0);d[4*e+2]=(31&f)<<3,d[4*e+1]=(f>>5&31)<<3,d[4*e+0]=(f>>10&31)<<3,d[4*e+3]=128==(128&f)?255:0},q.readPixel24=function(a,b,c,d,e){d[4*e+2]=a.getUint8(b+3*c+0),d[4*e+1]=a.getUint8(b+3*c+1),d[4*e+0]=a.getUint8(b+3*c+2),d[4*e+3]=255},q.readPixel32=function(a,b,c,d,e){d[4*e+2]=a.getUint8(b+4*c+0),d[4*e+1]=a.getUint8(b+4*c+1),d[4*e+0]=a.getUint8(b+4*c+2),d[4*e+3]=255},q.readMappedPixel8=function(a,b,c,d,e,f,g){var h=a.getUint8(d+e)+c;f[4*g+0]=b[4*h+0],f[4*g+1]=b[4*h+1],f[4*g+2]=b[4*h+2],f[4*g+3]=b[4*h+3]},q.readMappedPixel15=function(a,b,c,d,e,f,g){var h=a.getUint16(d+2*e,!0)+c;f[4*g+0]=b[4*h+0],f[4*g+1]=b[4*h+1],f[4*g+2]=b[4*h+2],f[4*g+3]=b[4*h+3]},q.readMappedPixel16=function(a,b,c,d,e,f,g){var h=a.getUint16(d+2*e,!0)+c;f[4*g+0]=b[4*h+0],f[4*g+1]=b[4*h+1],f[4*g+2]=b[4*h+2],f[4*g+3]=b[4*h+3]},q.readMappedPixel24=function(a,b,c,d,e,f,g){var h=a.getUint16(d+2*e,!0)+c;f[4*g+0]=b[4*h+0],f[4*g+1]=b[4*h+1],f[4*g+2]=b[4*h+2],f[4*g+3]=b[4*h+3]},q.readMappedPixel32=function(a,b,c,d,e,f,g){var h=a.getUint16(d+2*e,!0)+c;f[4*g+0]=b[4*h+0],f[4*g+1]=b[4*h+1],f[4*g+2]=b[4*h+2],f[4*g+3]=b[4*h+3]},q.readRLEImage=function(){throw"NYI"},q.readColormappedImage=function(a){var b=a.dataview,c=a.header,e=a.colorMap,f=c.imageSpec.width,g=c.imageSpec.height,h=new Uint8ClampedArray(f*g*4),i=c.imageSpec.pixelDepth,j=d+c.idLength+c.colorMapSpec.length*c.colorMapSpec.entrySizeBytes,k=c.colorMapSpec.firstEntry,l=null,r=(c.imageSpec.origin&m)===o?1:-1,s=(c.imageSpec.origin&n)===p?-1:1;if(!e)throw"Image is described as color-mapped, but has no map";switch(i){case 8:l=q.readMappedPixel8;break;case 16:l=q.readMappedPixel15;break;case 15:l=q.readMappedPixel16;break;case 24:l=q.readMappedPixel24;break;case 32:l=q.readMappedPixel32;break;default:throw"Unsupported pixel depth"}var t,u,v,w;r>0?(t=0,u=g):(t=g-1,u=-1),s>0?(v=0,w=f):(v=f-1,w=-1);for(var x,y=0,z=t;z!=u;z+=r){x=0;for(var A=v;A!=w;A+=s)l(b,e,k,j,z*f+A,h,y*f+x++);y++}return h},q.readTruecolorImage=function(a){var b=a.header,c=a.dataview,e=b.imageSpec.width,f=b.imageSpec.height,g=new Uint8ClampedArray(e*f*4),h=b.imageSpec.pixelDepth,i=d+b.idLength+b.colorMapSpec.length*b.colorMapSpec.entrySizeBytes,j=null,k=(b.imageSpec.origin&m)===o?1:-1,l=(b.imageSpec.origin&n)===p?-1:1;switch(h){case 8:j=q.readPixel8;break;case 16:j=q.readPixel15;break;case 15:j=q.readPixel16;break;case 24:j=q.readPixel24;break;case 32:j=q.readPixel32;break;default:throw"Unsupported pixel depth"}var r,s,t,u;k>0?(r=0,s=f):(r=f-1,s=-1),l>0?(t=0,u=e):(t=e-1,u=-1);for(var v,w=0,x=r;x!=s;x+=k){v=0;for(var y=t;y!=u;y+=l)j(c,i,x*e+y,g,w*e+v++);w++}return g},q.readImage=function(a){if(a.header.compressed)return q.readRLEImage(a);if(0===a.header.mapType)return q.readTruecolorImage(a);if(1===a.header.mapType)return q.readColormappedImage(a);throw"Unsupported map type"};var r={readFile:function(a){return new q(a)},loadFile:function(a,b){var c=new XMLHttpRequest;c.open("GET",a),c.responseType="arraybuffer",c.onload=function(){b(null,new q(this.response))},c.onerror=function(a){b(a,null)},c.send()},TGA:q,VERSION:"0.3.1"};b.exports=r})},{}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./easing"),h=d(g),i=function(){function a(b,c,d,f,g){function i(a){if(j.elapsed+=a,j.elapsed>j.duration&&!j.loop)j.stop();else{var b=j.timing(j.elapsed/j.duration%1);j.transform.call(this,b)}return j.oldUpdate?j.oldUpdate.call(this,a):!0}e(this,a);var j=this;return this.elapsed=0,this.drawable=b,this.duration=c,this.transform=d,this.timing=f||h["default"].linear,this.loop=g,this.oldUpdate=null,this.onUpdate=i,this}return f(a,[{key:"start",value:function(){return this.oldUpdate=this.drawable.onUpdate,this.drawable.onUpdate=this.onUpdate,this}},{key:"stop",value:function(){return this.elapsed=0,this.pause()}},{key:"pause",value:function(){return this.drawable.onUpdate=this.oldUpdate,this}}]),a}();c["default"]=i,b.exports=c["default"]},{"./easing":5}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(){throw d(this,f),"Ease cannot be instantiated."};e.linear=function(a){return a},e.none=e.linear,e.get=function(a){return-1>a&&(a=-1),a>1&&(a=1),function(b){return 0===a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}},e.getPowIn=function(a){return function(b){return Math.pow(b,a)}},e.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}},e.getPowInOut=function(a){return function(b){return(b*=2)<1?.5*Math.pow(b,a):1-.5*Math.abs(Math.pow(2-b,a))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)},e.sineOut=function(a){return Math.sin(a*Math.PI/2)},e.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)},e.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}},e.backIn=e.getBackIn(1.7),e.getBackOut=function(a){return function(b){return--b*b*((a+1)*b+a)+1}},e.backOut=e.getBackOut(1.7),e.getBackInOut=function(a){return a*=1.525,function(b){return(b*=2)<1?.5*b*b*((a+1)*b-a):.5*((b-=2)*b*((a+1)*b+a)+2)}},e.backInOut=e.getBackInOut(1.7),e.circIn=function(a){return-(Math.sqrt(1-a*a)-1)},e.circOut=function(a){return Math.sqrt(1- --a*a)},e.circInOut=function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},e.bounceIn=function(a){return 1-e.bounceOut(1-a)},e.bounceOut=function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},e.bounceInOut=function(a){return.5>a?.5*e.bounceIn(2*a):.5*e.bounceOut(2*a-1)+.5},e.getElasticIn=function(a,b){var c=2*Math.PI;return function(d){if(0===d||1===d)return d;var e=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b))}},e.elasticIn=e.getElasticIn(1,.3),e.getElasticOut=function(a,b){var c=2*Math.PI;return function(d){if(0===d||1===d)return d;var e=b/c*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-e)*c/b)+1}},e.elasticOut=e.getElasticOut(1,.3),e.getElasticInOut=function(a,b){var c=2*Math.PI;return function(d){var e=b/c*Math.asin(1/a);return(d*=2)<1?-.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b):a*Math.pow(2,-10*(d-=1))*Math.sin((d-e)*c/b)*.5+1}},e.elasticInOut=e.getElasticInOut(1,.3*1.5),c["default"]=e,b.exports=c["default"]},{}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b,c){if("image"===b||"image.co"===b)if(/\.tga$/.test(a))i["default"].loadFile(a,function(a,b){if(a)return void c(a,null);var d=document.createElement("canvas"),e=d.getContext("2d"),f=e.createImageData(b.width,b.height);f.data.set(b.imageData),d.height=b.height,d.width=b.width,e.putImageData(f,0,0);var g=new Image;g.onload=function(){c(null,this)},g.onerror=function(a){c(a,null)},g.src=d.toDataURL()});else{var d=new Image;"image.co"===b&&(d.crossOrigin="anoymous"),d.onload=function(){c(null,this)},d.onerror=function(a){c(a,null)},d.src=a}else{var e=new XMLHttpRequest;e.open("GET",a),e.responseType=b,e.onload=function(){c(null,this.response)},e.onerror=function(a){c(a,null)},e.send()}}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.loadResource=f;var h=a("libtga"),i=d(h),j=function(){function a(){e(this,a),this._callbacks={},this._assets={}}return g(a,[{key:"loadAsset",value:function(a,b,c){var d=this,e="_"+encodeURIComponent(a);return this._assets[e]?void c(null,this._assets[e]):(this._callbacks[e]=this._callbacks[e]||[],this._callbacks[e].push(c),void(this._assets.hasOwnProperty(e)||(this._assets[e]=!1,f(a,b,function(a,b){a||(d._assets[e]=b);for(var c;c=d._callbacks[e].shift();)c(a,b)}))))}},{key:"loadAssetGroup",value:function(a,b,c){if(a.length!==b.length)throw"Incompatible types: types.length = "+b.length+"; urls.length = "+a.length;for(var d=a.length,e=new Array(d),f=function(a,b,f){if(b)return void c(b,null);e[a]=f;var g,h=!0;for(g=0;d>g;g++)h=h&&e[g];h&&c(null,e)},g=0;g<a.length;g++)this.loadAsset(a[g],b[g],f.bind(void 0,g))}},{key:"getAsset",value:function(a){return this._assets[a]}}]),a}();c["default"]=j},{libtga:3}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){return 0===b&&a++,a}function h(a,b){return b>0&&a++,a}function i(a,b){return 0>b&&a++,a}function j(a,b){a=a||{};for(var c in b)a[c]=b[c];return a}function k(a,b){var c=["texture","mesh","program","rawProgram"];return c.forEach(function(c){c in b&&(a[c]=j(a[c],b[c]))}),a}function l(a){return{total:a.length,loading:a.reduce(g,0),loaded:a.reduce(h,0),error:a.reduce(i,0)}}Object.defineProperty(c,"__esModule",{value:!0});var m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},o=a("./gl-bound"),p=d(o),q=a("./asset-loader"),r=d(q),s=a("./mesh/file"),t=d(s),u=a("./texture"),v=d(u),w=a("./program"),x=d(w),y=a("./program/glowramp"),z=d(y),A=a("./program/opaque"),B=d(A),C={Glowramp:z["default"],Opaque:B["default"]},D=function(a){function b(a,c){e(this,b),n(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.manifest=c,this.loader=new r["default"],this.textures={},this.meshes={},this.programs={},this.queues={texture:[],mesh:[],program:[]},this.stats={texture:{},mesh:{},program:{},rawProgram:{}},this.complete=null,this.path="/assets/"}return f(b,a),m(b,[{key:"addAssets",value:function(a){this.manifest=k(this.manifest,a)}},{key:"addTexture",value:function(a,b){this.textures[a]=b}},{key:"addMesh",value:function(a,b){this.meshes[a]=b}},{key:"addProgram",value:function(a,b){this.programs[a]=b}},{key:"getTexture",value:function(a){var b=this.textures[a];return b&&(this.stats.texture[a]=(this.stats.texture[a]||0)+1),b}},{key:"getMesh",value:function(a){var b=this.meshes[a];return b&&(this.stats.mesh[a]=(this.stats.mesh[a]||0)+1),b}},{key:"getProgram",value:function(a){var b=this.programs[a];return b&&(this.stats.rawProgram.hasOwnProperty(a)?this.stats.rawProgram[a]++:this.stats.program[a]=(this.stats.program[a]||0)+1),b}},{key:"loadAll",value:function(a){var b,c,d=this.manifest;this.complete=a;for(b in d.texture)!d.texture.hasOwnProperty(b)||b in this.textures||(this.textures[b]=null,c=d.texture[b],this.loader.loadAsset((c["static"]?"":this.path)+c.path,"image",this._handleTexture.bind(this,this.queues.texture.length,b,c)),this.queues.texture.push(0));for(b in d.mesh)!d.mesh.hasOwnProperty(b)||b in this.meshes||(this.meshes[b]=null,c=d.mesh[b],this.loader.loadAsset((c["static"]?"":this.path)+c.path,"arraybuffer",this._handleMesh.bind(this,this.queues.mesh.length,b,c)),this.queues.mesh.push(0));for(b in d.program)!d.program.hasOwnProperty(b)||b in this.programs||(this.programs[b]=null,c=d.program[b],this.loader.loadAssetGroup([(c["static"]?"":this.path)+c.vertex,(c["static"]?"":this.path)+c.fragment],["text","text"],this._handleProgram.bind(this,this.queues.program.length,b,c)),this.queues.program.push(0));for(b in d.rawProgram)!d.rawProgram.hasOwnProperty(b)||b in this.programs||(this.stats.rawProgram[b]=0,this._createProgram(b,d.rawProgram[b]));return this.getStatus.bind(this)}},{key:"getStatus",value:function(){return{texture:l(this.queues.texture),mesh:l(this.queues.mesh),program:l(this.queues.program)}}},{key:"generateManifest",value:function(){var a={},b=["texture","mesh","rawProgram","program"];return b.forEach(function(b){a[b]={};for(var c in this.stats[b])this.stats[b].hasOwnProperty(c)&&this.stats[b][c]>0&&(a[b][c]=this.manifest[b][c])}.bind(this)),a}},{key:"_isComplete",value:function(){var a=this.getStatus();this.complete&&0===a.texture.loading&&0===a.mesh.loading&&0===a.program.loading&&this.complete()}},{key:"_handleTexture",value:function(a,b,c,d,e){if(d)throw this.queues.texture[a]=-1,console.error(d),"Could not load "+b;this.addTexture(b,new v["default"](this._gl,c,e)),this.queues.texture[a]=1,this._isComplete()}},{key:"_handleMesh",value:function(a,b,c,d,e){if(d)throw this.queues.mesh[a]=-1,console.error(d),"Could not load "+b;this.addMesh(b,new t["default"](this._gl,e)),this.queues.mesh[a]=1,this._isComplete()}},{key:"_createProgram",value:function(a,b){var c=x["default"];b.program in C&&(c=C[b.program]),this.addProgram(a,new c(this._gl,b.vertex,b.fragment))}},{key:"_handleProgram",value:function(a,b,c,d,e){if(d)throw this.queues.program[a]=-1,console.error(d),"Could not load "+b;var f=x["default"];c.program in C&&(f=C[c.program]),this.addProgram(b,new f(this._gl,e[0],e[1])),this.queues.program[a]=1,this._isComplete()}}]),b}(p["default"]);c["default"]=D,b.exports=c["default"]},{"./asset-loader":6,"./gl-bound":34,"./mesh/file":40,"./program":47,"./program/glowramp":48,"./program/opaque":49,"./texture":52}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("gl-matrix"),g=function(){function a(b,c){return d(this,a),this.position=f.vec3.create(),this.view=f.mat4.create(),this.project=f.mat4.create(),this.viewProject=f.mat4.create(),this.hFoV=Math.PI/4,this.near=.1,this.far=100,this.width=b,this.height=c,this.focus=f.vec3.create(),this.up=f.vec3.fromValues(0,1,0),this._updateProjection()._updateView()}return e(a,[{key:"lookAt",value:function(a){return f.vec3.copy(this.focus,a),this._updateView()}},{key:"translate",value:function(a){return f.vec3.translate(this.position,this.position,a),this._updateView()}},{key:"setPosition",value:function(a){return f.vec3.copy(this.position,a),this._updateView()}},{key:"setDimensions",value:function(a,b){return this.width=a,this.height=b,this._updateProjection()}},{key:"setFieldOfView",value:function(a){return this.hFoV=a,this._updateProjection()}},{key:"setFar",value:function(a){return this.far=a,this._updateProjection()}},{key:"_updateView",value:function(){return f.mat4.lookAt(this.view,this.position,this.focus,this.up),this}},{key:"_updateProjection",value:function(){return f.mat4.perspective(this.project,this.hFoV,this.width/this.height,this.near,this.far),this}}]),a}();c["default"]=g,b.exports=c["default"]},{"gl-matrix":1}],9:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=a("gl-matrix"),e={teamColors:{RESISTANCE:d.vec4.fromValues(0,.7607843137254902,1,1),ENLIGHTENED:d.vec4.fromValues(.1568627450980392,.9568627450980393,.1568627450980392,1),NEUTRAL:d.vec4.fromValues(.9764705882352941,.9764705882352941,.9764705882352941,1),LOKI:d.vec4.fromValues(1,.1568627450980392,.1568627450980392,1)},qualityColors:{EXTREMELY_RARE:d.vec4.fromValues(.9803921568627451,.39215686274509803,.39215686274509803,1),VERY_RARE:d.vec4.fromValues(.9568627450980393,.5215686274509804,.9254901960784314,1),MORE_RARE:d.vec4.fromValues(.7647058823529411,0,1,1),RARE:d.vec4.fromValues(.6666666666666666,.5372549019607843,.984313725490196,1),LESS_COMMON:d.vec4.fromValues(.45098039215686275,.6588235294117647,1,1),COMMON:d.vec4.fromValues(.5098039215686274,.9529411764705882,.7058823529411765,1),VERY_COMMON:d.vec4.fromValues(.6980392156862745,.6980392156862745,.6980392156862745,1),L1:d.vec4.fromValues(.996078431372549,.807843137254902,.35294117647058826,1),L2:d.vec4.fromValues(1,.6509803921568628,.18823529411764706,1),L3:d.vec4.fromValues(1,.45098039215686275,.08235294117647059,1),L4:d.vec4.fromValues(.8941176470588236,0,0,1),L5:d.vec4.fromValues(.9921568627450981,.1607843137254902,.5725490196078431,1),L6:d.vec4.fromValues(.9215686274509803,.14901960784313725,.803921568627451,1),L7:d.vec4.fromValues(.7568627450980392,.1411764705882353,.8784313725490196,1),L8:d.vec4.fromValues(.5882352941176471,.15294117647058825,.9568627450980393,1)},anomalyColors:{1:d.vec4.fromValues(1,.5686274509803921,.21176470588235294,1),2:d.vec4.fromValues(1,.3215686274509804,.9058823529411765,1),3:d.vec4.fromValues(.6196078431372549,.35294117647058826,1,1),4:d.vec4.fromValues(.8431372549019608,.27058823529411763,.27058823529411763,1),5:d.vec4.fromValues(1,.9450980392156862,0,1),6:d.vec4.fromValues(.6509803921568628,1,.9019607843137255,1),7:d.vec4.fromValues(.5725490196078431,.5803921568627451,.592156862745098,1)},artifactGlowColors:{Helios:{Red:d.vec4.fromValues(.92,.51,.14,1),Purple:d.vec4.fromValues(1,.87,.55,1),Target:d.vec4.fromValues(1,.72,0,1)},Amar:{Target:d.vec4.fromValues(.62,.22,.62,1),Red:d.vec4.fromValues(.79,.11,.49,1),Purple:d.vec4.fromValues(.58,.17,1,1)},Jarvis:{Target:d.vec4.fromValues(.62,.22,.62,1),Red:d.vec4.fromValues(.79,.11,.49,1),Purple:d.vec4.fromValues(.58,.17,1,1)},Shonin:{Red:d.vec4.fromValues(.78,.84,1,1),Purple:d.vec4.fromValues(.25,.81,1,1),Target:d.vec4.fromValues(.7,.7,.7,1)},Lightman:{Red:d.vec4.fromValues(1,.44,.45,1),Purple:d.vec4.fromValues(1,.24,.25,1),Target:d.vec4.fromValues(.74,0,.02,1)}},xmColors:{coreGlow:d.vec4.fromValues(.92,.7,.89,1),coreGlowAlt:d.vec4.fromValues(.6,.4,.6,.8),coreGlowAda:d.vec4.fromValues(0,.7607843137254902,1,1),coreGlowJarvis:d.vec4.fromValues(.1568627450980392,.9568627450980393,.1568627450980392,1)},Mesh:{Inventory:{Xmp:"XmpMesh",XmpXm:"XmpXMMesh",Ultrastrike:"UltrastrikeMesh",UltrastrikeXm:"UltrastrikeXMMesh",ResShield:"ResShieldMesh",ResShieldXm:"ResShieldXMMesh",PowerCube:"PowerCubeMesh",PowerCubeXm:"PowerCubeXmMesh",LinkAmp:"LinkAmpMesh",LinkAmpXm:"LinkAmpXmMesh",HeatSink:"HeatSinkMesh",HeatSinkXm:"HeatSinkXmMesh",MultiHack:"MultiHackMesh",MultiHackXm:"MultiHackXmMesh",ForceAmp:"ForceAmpMesh",ForceAmpXm:"ForceAmpXmMesh",Turret:"TurretMesh",TurretXm:"TurretXmMesh",FlipCardAda:"FlipCardMeshAda",FlipCardJarvis:"FlipCardMeshJarvis",FlipCardXm:"FlipCardXmMesh",Resonator:"ResonatorMesh",ResonatorXm:"ResonatorXMMesh",Capsule:"CapsuleMesh",InterestCapsule:"InterestCapsuleMesh",CapsuleXm:"CapsuleXmMesh",ExtraShield:"ExtraShieldMesh",MediaCube:"MediaCubeMesh",MediaPlaneMesh:"MediaPlaneMesh"},Resource:{Xmp:"XmpResourceUnitMesh",PortalKeyResourceUnit:"PortalKeyResourceUnit",Ultrastrike:"UltrastrikeResourceUnitMesh",PowerCube:"PowerCubeResourceUnitMesh",LinkAmp:"LinkAmpResourceUnitMesh",HeatSink:"HeatSinkResourceUnitMesh",MultiHack:"MultiHackResourceUnitMesh",ForceAmp:"ForceAmpResourceUnitMesh",Turret:"TurretResourceUnitMesh",FlipCardAda:"FlipCardResourceUnitMeshAda",FlipCardJarvis:"FlipCardResourceUnitMeshJarvis",Resonator:"ResonatorResourceUnitMesh",PortalShield:"PortalShieldResourceUnitMesh",Capsule:"CapsuleResourceUnitMesh",InterestCapsule:"InterestCapsuleResourceUnitMesh",ExtraShield:"ExtraShieldResourceUnitMesh"},Player:{Player:"PlayerMesh",PlayerEdge:"PlayerMeshEdge",PlayerReflection:"PlayerMeshReflection",PlayerGlow:"PlayerMeshGlow",BreadCrumb:"BreadCrumbMesh",Compass:"CompassMesh"},Ornament:{MeetupPoint:"OrnamentMeetupPointMesh",FinishPoint:"OrnamentFinishPointMesh",Cluster:"OrnamentClusterMesh",Volatile:"OrnamentVolatileMesh"},World:{Shield:"PortalShieldMesh",Portal:"TexturedPortalMesh",Waypoint:"TexturedScannerFTMesh",Resonator:"ResonatorUnitLowResMesh",XmpRing:"XmpRingMesh",UltraStrikeRing:"UltraStrikeRingMesh",UltraStrikeColumn:"UltraStrikeColumnMesh",ArtifactsRedGlow:"ArtifactsRedGlow",ArtifactsGreenGlow:"ArtifactsGreenGlow",ArtifactsPurpleGlow:"ArtifactsPurpleGlow",ArtifactsTargetGlow:"ArtifactsTargetGlow",SingleResonator:"SingleResonatorMesh",OrnamentMeetupPoint:"OrnamentMeetupPointMesh",OrnamentFinishPoint:"OrnamentFinishPointMesh",OrnamentCluster:"OrnamentClusterMesh",OrnamentVolatile:"OrnamentVolatileMesh"}},Program:{Bicolored:"bicolor_textured",Textured:"textured",RegionTextured:"region_textured",Glowramp:"portal_scanner",Xm:"xm",ShieldEffect:"shield",Atmosphere:"atmosphere",Link:"LinkShader",SphericalLink:"link3d",ParticlePortal:"particle_portals"},Texture:{FlipCard:"FlipCardTexture",Xm:"ObjectXMTexture",Glowramp:"GlowrampTexture",Media:"MediaCubeTexture",Waypoint:"FtWaypointTexture",ShieldEffect:"PortalShieldTexture",ColorGlow:"ColorGlowTexture",TargetGlow:"TargetGlowTexture",PortalLink:"PortalLinkTexture",ResonatorLink:"ResonatorLinkTexture",OrnamentMeetupPoint:"OrnamentMeetupPointTexture",OrnamentFinishPoint:"OrnamentFinishPointTexture",OrnamentCluster:"OrnamentClusterTexture",OrnamentVolatile:"OrnamentVolatileTexture",Particle:"ParticleTexture"}};c["default"]=e,b.exports=c["default"]},{"gl-matrix":1}],10:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.programName=b,this.program=null,this.uniforms={},this.drawfn=null,this.elapsed=0,this.ready=!1}return e(a,[{key:"init",value:function(a){return this.program=a.getProgram(this.programName),this.program?(this.ready=!0,!0):(console.warn("missing program "+this.programName),!1)}},{key:"setDrawFn",value:function(a){return this.drawfn=a,this}},{key:"draw",value:function(){return this.ready?void this.program.use(this.drawfn):(console.warn("drawable is not initialized"),!1)}},{key:"setUniform",value:function(a,b){return this.uniforms[a]=b,this}},{key:"updateTime",value:function(a){return this.elapsed+=a,this.onUpdate?this.onUpdate(a,this.elapsed):!0}},{key:"dispose",value:function(){}}]),a}();c["default"]=f,b.exports=c["default"]},{}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./model"),l=d(k),m=a("../mesh/sphere"),n=d(m),o=a("gl-matrix"),p=j["default"].Program.Atmosphere,q=function(a){function b(a,c,d,f){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,p,null),this.radius=a,this.vSlices=c,this.hSlices=d,this.uniforms.u_normalMatrix=o.mat3.create(),this.scaleFactor=f||1.1,o.mat4.scale(this.local,this.local,[this.scaleFactor,this.scaleFactor,this.scaleFactor])}return f(b,a),g(b,[{key:"updateView",value:function(a){h(Object.getPrototypeOf(b.prototype),"updateView",this).call(this,a);var c=o.mat4.invert(o.mat4.create(),a),d=o.mat4.transpose(o.mat4.create(),c);return this.uniforms.u_normalMatrix=o.mat3.fromMat4(o.mat3.create(),d),this}},{key:"init",value:function(a){return this.mesh=new n["default"](a._gl,this.radius,this.vSlices,this.hSlices),h(Object.getPrototypeOf(b.prototype),"init",this).call(this,a)}}]),b}(l["default"]);c["default"]=q,b.exports=c["default"]},{"../constants":9,"../mesh/sphere":44,"./model":17,"gl-matrix":1}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},h=a("../constants"),i=d(h),j=a("./textured"),k=d(j),l=a("gl-matrix"),m=i["default"].Program.Bicolored,n=l.vec4.clone(i["default"].qualityColors.VERY_RARE),o=l.vec4.clone(i["default"].xmColors.coreGlow),p=function(a){function b(a,c){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,m,a,c),this.uniforms.u_color0=l.vec4.clone(n),this.uniforms.u_color1=l.vec4.clone(o)}return f(b,a),b}(k["default"]);c["default"]=p,b.exports=c["default"]},{"../constants":9,"./textured":27,"gl-matrix":1}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);

var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./textured"),l=d(k),m=a("gl-matrix"),n=j["default"].Program.Glowramp,o=m.vec4.clone(j["default"].teamColors.NEUTRAL),p=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,n,a,c),this.uniforms.u_baseColor=m.vec4.clone(o),this.uniforms.u_rotation=0,this.uniforms.u_rampTarget=0,this.uniforms.u_alpha=.6}return f(b,a),g(b,[{key:"updateTime",value:function(a){var c=h(Object.getPrototypeOf(b.prototype),"updateTime",this).call(this,a),d=this.elapsed/5e3;return this.uniforms.u_rotation=d,this.uniforms.u_rampTarget=Math.sin(Math.PI/2*(d-Math.floor(d))),this.uniforms.u_alpha=.05*Math.sin(d)+.75,c}}]),b}(l["default"]);c["default"]=p,b.exports=c["default"]},{"../constants":9,"./textured":27,"gl-matrix":1}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){var b=function(b){function c(){e(this,c),j(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,t[a],u.FlipCard)}return f(c,b),c}(n["default"]);return b}function h(a){var b=function(b){function c(){e(this,c),j(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,t[a],u.Xm)}return f(c,b),c}(p["default"]);return b}function i(a){var b=function(b){function c(){e(this,c),j(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,l["default"].Program.Textured,t[a],l["default"].Texture.FlipCard)}return f(c,b),c}(r["default"]);return b}Object.defineProperty(c,"__esModule",{value:!0});var j=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},k=a("../constants"),l=d(k),m=a("./bicolored"),n=d(m),o=a("./xm"),p=d(o),q=a("./textured"),r=d(q),s={},t=l["default"].Mesh.Inventory,u=l["default"].Texture;for(var v in t)if(/^Media/.test(v)){if("MediaPlane"===v)continue;s[v]=i(v)}else s[v]=/Xm$/.test(v)?h(v):g(v);c["default"]=s,b.exports=c["default"]},{"../constants":9,"./bicolored":12,"./textured":27,"./xm":29}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./textured"),j=d(i),k=a("gl-matrix"),l=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,null,c),this.uniforms.u_cameraFwd=k.vec3.fromValues(0,0,-1),this.uniforms.u_elapsedTime=0}return f(b,a),g(b,[{key:"updateView",value:function(a,c){if(h(Object.getPrototypeOf(b.prototype),"updateView",this).call(this,a,c),c){var d=k.mat3.fromMat4(k.mat3.create(),c.view),e=k.quat.fromMat3(k.quat.create(),d),f=k.vec3.transformQuat(k.vec3.create(),k.vec3.fromValues(0,0,-1),e);k.vec3.normalize(f,f),this.uniforms.u_cameraFwd=f}}},{key:"updateTime",value:function(a){var c=h(Object.getPrototypeOf(b.prototype),"updateTime",this).call(this,a);return this.uniforms.u_elapsedTime=this.elapsed/1e3%300*.1,c}}]),b}(j["default"]);c["default"]=l,b.exports=c["default"]},{"./textured":27,"gl-matrix":1}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../drawable"),j=d(i),k=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.meshName=c,this.mesh=null,this.drawfn=this._draw.bind(this)}return f(b,a),g(b,[{key:"init",value:function(a){return this.meshName&&(this.mesh=a.getMesh(this.meshName),!this.mesh)?(console.warn("missing mesh "+this.meshName),!1):h(Object.getPrototypeOf(b.prototype),"init",this).call(this,a)}},{key:"_draw",value:function(a,b){for(var c in this.uniforms)this.uniforms.hasOwnProperty(c)&&c in b&&b[c](this.uniforms[c]);this.mesh.draw(a)}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"../drawable":10}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./mesh"),j=d(i),k=a("gl-matrix"),l=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c),this.viewProject=k.mat4.create(),this._position=k.vec3.create(),this._rotation=k.quat.create(),this._scale=k.vec3.fromValues(1,1,1),this._model=k.mat4.create(),this.local=k.mat4.create(),this.world=k.mat4.create(),this.uniforms.u_modelViewProject=k.mat4.create()}return f(b,a),g(b,[{key:"updateMatrix",value:function(){k.mat4.fromRotationTranslation(this.local,this._rotation,this._position),k.mat4.scale(this.local,this.local,this._scale),k.mat4.multiply(this._model,this.world,this.local),k.mat4.multiply(this.uniforms.u_modelViewProject,this.viewProject,this._model)}},{key:"updateView",value:function(a){this.viewProject=a,this.updateMatrix()}},{key:"setMatrix",value:function(a){this._model=a,this.updateMatrix()}},{key:"translate",value:function(a){k.vec3.add(this._position,this._position,a),this.updateMatrix()}},{key:"scale",value:function(a){k.vec3.add(this._scale,this._scale,a),this.updateMatrix()}},{key:"setScale",value:function(a){k.vec3.copy(this._scale,a),this.updateMatrix()}},{key:"rotateQuat",value:function(a){a.add(this._rotation,this._rotation,a),this.updateMatrix()}},{key:"translateX",value:function(a){this.translate(k.vec3.fromValues(a,0,0))}},{key:"translateY",value:function(a){this.translate(k.vec3.fromValues(0,a,0))}},{key:"translateZ",value:function(a){this.translate(k.vec3.fromValues(0,0,a))}},{key:"scalarScale",value:function(a){this.scale(k.vec3.fromValues(a,a,a))}},{key:"setScalarScale",value:function(a){this.setScale(k.vec3.fromValues(a,a,a))}}]),b}(j["default"]);c["default"]=l,b.exports=c["default"]},{"./mesh":16,"gl-matrix":1}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},h=a("./textured"),i=d(h),j=a("../constants"),k=d(j),l=a("gl-matrix"),m=k["default"].Program.RegionTextured,n=function(a){function b(a,c){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,m,a,c),this.uniforms.u_texCoordBase=l.vec2.fromValues(0,0),this.uniforms.u_texCoordExtent=l.vec2.fromValues(1,1),this.uniforms.u_color=l.vec4.clone(k["default"].teamColors.LOKI)}return f(b,a),b}(i["default"]);c["default"]=n,b.exports=c["default"]},{"../constants":9,"./textured":27,"gl-matrix":1}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./particle"),l=d(k),m=a("../mesh/particle-portal"),n=d(m),o=a("gl-matrix"),p=j["default"].Program.ParticlePortal,q=40,r=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,p);var i=o.vec4.clone(a);i[3]=d,this.uniforms.u_color=new Float32Array(4*q),this.uniforms.u_position=new Float32Array(4*q),this.uniforms.u_params=new Float32Array(4*q),o.vec4.copy(this.uniforms.u_color,i),o.vec4.copy(this.uniforms.u_position,o.vec4.fromValues(0,0,0,c)),o.vec4.copy(this.uniforms.u_params,o.vec4.fromValues(0,g,f,1))}return f(b,a),g(b,[{key:"updateView",value:function(a,c){if(h(Object.getPrototypeOf(b.prototype),"updateView",this).call(this,a,c),c){var d=o.vec3.length(c.position),e=Math.pow(d,.2);this.uniforms.u_params[3]=e}}},{key:"updateTime",value:function(a){var c=h(Object.getPrototypeOf(b.prototype),"updateTime",this).call(this,a);return this.uniforms.u_params[0]=this.elapsed/1e5*this.uniforms.u_params[1],c}},{key:"init",value:function(a){return this.mesh=new n["default"](a._gl),h(Object.getPrototypeOf(b.prototype),"init",this).call(this,a)}}]),b}(l["default"]);c["default"]=r,b.exports=c["default"]},{"../constants":9,"../mesh/particle-portal":41,"./particle":20,"gl-matrix":1}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./textured"),l=d(k),m=a("gl-matrix"),n=j["default"].Texture.Particle,o=function(a){function b(a){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,null,n),this.uniforms.u_cameraPos=m.vec3.fromValues(0,0,0)}return f(b,a),g(b,[{key:"updateView",value:function(a,c){h(Object.getPrototypeOf(b.prototype),"updateView",this).call(this,a,c),c&&m.vec3.copy(this.uniforms.u_cameraPos,c.position)}}]),b}(l["default"]);c["default"]=o,b.exports=c["default"]},{"../constants":9,"./textured":27,"gl-matrix":1}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./link"),l=d(k),m=a("../mesh/portal-link"),n=d(m),o=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,j["default"].Program.Link,j["default"].Texture.PortalLink),this.start=a,this.end=c,this.color=d,this.startPercent=f,this.endPercent=g}return f(b,a),g(b,[{key:"init",value:function(a){return this.mesh=new n["default"](a._gl,this.start,this.end,this.color,this.startPercent,this.endPercent),h(Object.getPrototypeOf(b.prototype),"init",this).call(this,a)}}]),b}(l["default"]);c["default"]=o,b.exports=c["default"]},{"../constants":9,"../mesh/portal-link":42,"./link":15}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./link"),l=d(k),m=a("../mesh/resonator-link"),n=d(m),o=function(a){function b(a,c,d,f,g){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,j["default"].Program.Link,j["default"].Texture.ResonatorLink),this.portalPosition=a,this.slot=c,this.distance=d,this.color=f,this.resonatorPercent=g}return f(b,a),g(b,[{key:"init",value:function(a){return this.mesh=new n["default"](a._gl,this.portalPosition,this.slot,this.distance,this.color,this.resonatorPercent),h(Object.getPrototypeOf(b.prototype),"init",this).call(this,a)}}]),b}(l["default"]);c["default"]=o,b.exports=c["default"]},{"../constants":9,"../mesh/resonator-link":43,"./link":15}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){var b=function(b){function c(){e(this,c),h(Object.getPrototypeOf(c.prototype),"constructor",this).call(this,n[a],j["default"].Texture.FlipCard)}return f(c,b),c}(l["default"]);return b}Object.defineProperty(c,"__esModule",{value:!0});var h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./bicolored"),l=d(k),m={},n=j["default"].Mesh.Resource;for(var o in n)m[name]=g(o);c["default"]=m,b.exports=c["default"]},{"../constants":9,"./bicolored":12}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./textured"),l=d(k),m=a("gl-matrix"),n=j["default"].Program.ShieldEffect,o=m.vec4.clone(j["default"].teamColors.NEUTRAL),p=m.vec2.fromValues(.5,1.3),q=m.vec3.fromValues(.5,.5,.5),r=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,n,a,c),this.uniforms.u_color=m.vec4.clone(o),this.uniforms.u_rampTargetInvWidth=m.vec2.clone(p),this.uniforms.u_contributionsAndAlpha=m.vec3.clone(q)}return f(b,a),g(b,[{key:"updateTime",value:function(a){var c=h(Object.getPrototypeOf(b.prototype),"updateTime",this).call(this,a),d=this.elapsed/1e4;return this.uniforms.u_rampTargetInvWidth[0]=-(d-Math.floor(d)),this.uniforms.u_rampTargetInvWidth[1]=Math.sin((d-Math.floor(d))*Math.PI/2),c}}]),b}(l["default"]);c["default"]=r,b.exports=c["default"]},{"../constants":9,"./textured":27,"gl-matrix":1}],25:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./link"),l=d(k),m=a("../mesh/spherical-portal-link"),n=d(m),o=function(a){function b(a,c,d,f,g,i){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,j["default"].Program.SphericalLink,j["default"].Texture.PortalLink),this.radius=a,this.start=c,this.end=d,this.color=f,this.startPercent=g,this.endPercent=i}return f(b,a),g(b,[{key:"init",value:function(a){return this.mesh=new n["default"](a._gl,this.radius,this.start,this.end,this.color,this.startPercent,this.endPercent),h(Object.getPrototypeOf(b.prototype),"init",this).call(this,a)}},{key:"updateView",value:function(a,c,d){h(Object.getPrototypeOf(b.prototype),"updateView",this).call(this,a,c,d),this.uniforms.u_model=this.model}}]),b}(l["default"]);c["default"]=o,b.exports=c["default"]},{"../constants":9,"../mesh/spherical-portal-link":45,"./link":15}],26:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./textured"),l=d(k),m=a("../mesh/sphere"),n=d(m),o=j["default"].Program.Textured,p=function(a){function b(a,c,d,f){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,o,null,a),this.radius=c,this.vSlices=d,this.hSlices=f}return f(b,a),g(b,[{key:"init",value:function(a){return this.mesh=new n["default"](a._gl,this.radius,this.vSlices,this.hSlices),h(Object.getPrototypeOf(b.prototype),"init",this).call(this,a)}}]),b}(l["default"]);c["default"]=p,b.exports=c["default"]},{"../constants":9,"../mesh/sphere":44,"./textured":27}],27:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./model"),j=d(i),k=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c),this.textureName=d,this.texture=null}return f(b,a),g(b,[{key:"draw",value:function(){this.texture.use(0),this.uniforms.u_texture=0,h(Object.getPrototypeOf(b.prototype),"draw",this).call(this)}},{key:"init",value:function(a){return this.textureName&&(this.texture=a.getTexture(this.textureName),!this.texture)?(console.warn("missing texture "+this.textureName),!1):h(Object.getPrototypeOf(b.prototype),"init",this).call(this,a)}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./model":17}],28:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){var c=function(c){function d(){e(this,d),k(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,b)}return f(d,c),d}(o["default"]);return c}function h(a,b){var c=function(c){function d(){e(this,d),k(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,b)}return f(d,c),d}(q["default"]);return c}function i(a,b){var c=function(c){function d(){e(this,d),k(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,b)}return f(d,c),d}(s["default"]);return c}function j(a,b){var c=function(c){function d(){e(this,d),k(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,b)}return f(d,c),d}(u["default"]);return c}Object.defineProperty(c,"__esModule",{value:!0});var k=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},l=a("../constants"),m=d(l),n=a("./glowramp"),o=d(n),p=a("./bicolored"),q=d(p),r=a("./shield-effect"),s=d(r),t=a("./ornament"),u=d(t),v={},w=m["default"].Mesh.World,x=m["default"].Texture;v.Portal=g(w.Portal,x.Glowramp),v.Waypoint=g(w.Waypoint,x.Waypoint),v.ArtifactsRedGlow=g(w.ArtifactsRedGlow,x.ColorGlow),v.ArtifactsGreenGlow=g(w.ArtifactsGreenGlow,x.ColorGlow),v.ArtifactsPurpleGlow=g(w.ArtifactsPurpleGlow,x.ColorGlow),v.ArtifactsTargetGlow=g(w.ArtifactsTargetGlow,x.TargetGlow),v.Shield=i(w.Shield,x.ShieldEffect),v.Resonator=h(w.Resonator,x.FlipCard),v.OrnamentMeetupPoint=j(w.OrnamentMeetupPoint,x.OrnamentMeetupPoint),v.OrnamentFinishPoint=j(w.OrnamentFinishPoint,x.OrnamentFinishPoint),v.OrnamentCluster=j(w.OrnamentCluster,x.OrnamentCluster),v.OrnamentVolatile=j(w.OrnamentVolatile,x.OrnamentVolatile),c["default"]=v,b.exports=c["default"]},{"../constants":9,"./bicolored":12,"./glowramp":13,"./ornament":18,"./shield-effect":24}],29:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("./textured"),l=d(k),m=a("gl-matrix"),n=j["default"].Program.Xm,o=m.vec4.clone(j["default"].xmColors.coreGlow),p=m.vec4.clone(j["default"].xmColors.coreGlowAlt),q=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,n,a,c),this.uniforms.u_elapsedTime=0,this.uniforms.u_teamColor=m.vec4.clone(d||o),this.uniforms.u_altColor=m.vec4.clone(p)}return f(b,a),g(b,[{key:"updateTime",value:function(a){var c=h(Object.getPrototypeOf(b.prototype),"updateTime",this).call(this,a);return this.uniforms.u_elapsedTime=this.elapsed/1e3%300*.1,c}}]),b}(l["default"]);c["default"]=q,b.exports=c["default"]},{"../constants":9,"./textured":27,"gl-matrix":1}],30:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./asset-manager"),h=d(g),i=a("./renderer/object"),j=d(i),k=a("./utils"),l=a("./drawable/world"),m=d(l),n=a("./drawable/resource"),o=d(n),p=a("./drawable/inventory"),q=d(p),r=a("./entity/inventory"),s=d(r),t=a("./entity/portal"),u=d(t),v=a("./camera"),w=d(v),x=a("gl-matrix"),y=function(){
function a(b,c,d){e(this,a),this.canvas=b;var f={};d&&(f.preserveDrawingBuffer=!0);var g=b.getContext("webgl",f)||b.getContext("experimental-webgl",f);if(!g)throw"Could not initialize webgl";g.clearColor(0,0,0,1),this.gl=g,this.camera=new w["default"](b.width,b.height),this.camera.setPosition(x.vec3.fromValues(0,20,25)).lookAt(x.vec3.fromValues(0,10,0)),this.assetManager=new h["default"](this.gl,c),this.objectRenderer=new j["default"](this.gl,this.assetManager),this.start=this.last=null,this.paused=!1,this.cleared=!1,this.frame=null}return f(a,[{key:"resize",value:function(a,b){this.canvas.width=a,this.canvas.height=b,this.camera.setDimensions(a,b),this.gl.viewport(0,0,a,b)}},{key:"updateView",value:function(){this.objectRenderer.updateView(this.camera)}},{key:"stop",value:function(){this.paused=!0,this.cleared=!1,this.frame&&window.cancelAnimationFrame(this.frame)}},{key:"demoEntities",value:function(){var a,b,c=-5,d=0,e=4;for(a in s["default"])b=new s["default"][a](this),b&&(b.translate(x.vec3.fromValues(c,d,e)),c++,c>5&&(c=-5,e--),console.log("added "+a));var f=new u["default"](this);f.translate(x.vec3.fromValues(c,d,e))}},{key:"demo",value:function(){var a,b,c=-5,d=0,e=4;for(a in q["default"])b=new q["default"][a],b&&(x.mat4.translate(b.world,b.world,x.vec3.fromValues(c,d,e)),c++,c>5&&(c=-5,e--),this.objectRenderer.addDrawable(b),console.log("added "+a));for(a in o["default"])b=new o["default"][a],b&&(x.mat4.translate(b.world,b.world,x.vec3.fromValues(c,d,e)),c++,c>5&&(c=-5,e--),this.objectRenderer.addDrawable(b),console.log("added "+a));for(a in m["default"])b=new m["default"][a],b&&(x.mat4.translate(b.world,b.world,x.vec3.fromValues(c,d,e)),c++,c>5&&(c=-5,e--),this.objectRenderer.addDrawable(b),console.log("added "+a))}},{key:"draw",value:function(a){var b=this.gl;b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),k.resetGL(b),this.objectRenderer.render(),this.objectRenderer.updateTime(a)}},{key:"render",value:function(a){if(this.paused)return this.cleared=!0,void(this.paused=!1);var b=0;this.start?(b=a-this.last,this.last=a):(this.start=a,this.last=a),this.draw(b),this.frame=window.requestAnimationFrame(this.render.bind(this))}},{key:"preload",value:function(a){this.assetManager.loadAll(a)}}]),a}();c["default"]=y,b.exports=c["default"]},{"./asset-manager":7,"./camera":8,"./drawable/inventory":14,"./drawable/resource":23,"./drawable/world":28,"./entity/inventory":32,"./entity/portal":33,"./renderer/object":51,"./utils":53,"gl-matrix":1}],31:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("gl-matrix"),g=function(){function a(b){d(this,a),this.drawables={},this.transform=f.mat4.create(),this.engine=b}return e(a,[{key:"addDrawable",value:function(a,b){this.removeDrawable(a),this.drawables[a]=b,this.engine.objectRenderer.addDrawable(b)}},{key:"removeDrawable",value:function(a,b){this.drawables[a]&&this.engine.objectRenderer.removeDrawable(this.drawables[a],b)}},{key:"applyTransform",value:function(){for(var a in this.drawables)this.drawables[a].setMatrix(this.transform)}},{key:"translate",value:function(a){f.mat4.translate(this.transform,this.transform,a),this.applyTransform()}},{key:"rotate",value:function b(a){var b=f.mat4.create();f.mat4.fromQuat(b,a),f.mat4.multiply(this.transform,this.transform,b),this.applyTransform()}},{key:"setAnimation",value:function(a){for(var b in this.drawables)this.drawables[b].onUpdate=a}}]),a}();c["default"]=g,b.exports=c["default"]},{"gl-matrix":1}],32:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){var c=function(c){function d(c){e(this,d),h(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,c),this.addDrawable(a,new n["default"][a]),this.addDrawable(a+"Xm",new n["default"][a+"Xm"]),this.drawables[a].uniforms.u_color0=o.vec4.clone(b)}return f(d,c),d}(l["default"]);return c}Object.defineProperty(c,"__esModule",{value:!0});var h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}};c.createItemEntity=g;var i=a("../constants"),j=d(i),k=a("../entity"),l=d(k),m=a("../drawable/inventory"),n=d(m),o=a("gl-matrix"),p={},q={Xmp:"L8",Ultrastrike:"L8",ResShield:"VERY_RARE",PowerCube:"L8",LinkAmp:"EXTREMELY_RARE",HeatSink:"VERY_RARE",MultiHack:"VERY_RARE",ForceAmp:"RARE",Turret:"RARE",Resonator:"L8",Capsule:"RARE"};for(var r in q)p[r]=g(r,j["default"].qualityColors[q[r]]);var s=function(a){function b(a){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.addDrawable("FlipCardAda",new n["default"].FlipCardAda),this.addDrawable("FlipCardXm",new n["default"].FlipCardXm),this.drawables.FlipCardXm.uniforms.u_teamColor=o.vec4.clone(j["default"].teamColors.RESISTANCE),this.drawables.FlipCardAda.uniforms.u_color1=o.vec4.clone(j["default"].teamColors.RESISTANCE),this.drawables.FlipCardAda.uniforms.u_color0=o.vec4.clone(j["default"].qualityColors.VERY_RARE)}return f(b,a),b}(l["default"]);p.FlipCardAda=s;var t=function(a){function b(a){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.addDrawable("FlipCardJarvis",new n["default"].FlipCardJarvis),this.addDrawable("FlipCardXm",new n["default"].FlipCardXm),this.drawables.FlipCardXm.uniforms.u_teamColor=o.vec4.clone(j["default"].teamColors.ENLIGHTENED),this.drawables.FlipCardJarvis.uniforms.u_color1=o.vec4.clone(j["default"].teamColors.ENLIGHTENED),this.drawables.FlipCardJarvis.uniforms.u_color0=o.vec4.clone(j["default"].qualityColors.VERY_RARE)}return f(b,a),b}(l["default"]);p.FlipCardJarvis=t;var u=function(a){function b(a){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.addDrawable("ExtraShield",new n["default"].ExtraShield),this.addDrawable("ResShieldXm",new n["default"].ResShieldXm),this.drawables.ExtraShield.uniforms.u_color0=o.vec4.clone(j["default"].qualityColors.VERY_RARE)}return f(b,a),b}(l["default"]);p.ExtraShield=u;var v=function(a){function b(a){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.addDrawable("InterestCapsule",new n["default"].InterestCapsule),this.addDrawable("CapsuleXm",new n["default"].CapsuleXm),this.drawables.InterestCapsule.uniforms.u_color0=o.vec4.clone(j["default"].qualityColors.VERY_RARE)}return f(b,a),b}(l["default"]);p.InterestCapsule=v,c["default"]=p},{"../constants":9,"../drawable/inventory":14,"../entity":31,"gl-matrix":1}],33:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../constants"),j=d(i),k=a("../entity"),l=d(k),m=a("../drawable/world"),n=d(m),o=a("../drawable/resonator-link"),p=d(o),q=a("gl-matrix"),r=function(a){function b(a){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.addDrawable("Portal",new n["default"].Portal),q.mat4.scale(this.drawables.Portal.local,this.drawables.Portal.local,q.vec3.fromValues(6,6,6)),this.setColor(q.vec4.clone(j["default"].teamColors.LOKI))}return f(b,a),g(b,[{key:"setColor",value:function(a){this.color=q.vec4.clone(a),this.drawables.Portal.uniforms.u_baseColor=this.color,this.drawables.Shield&&(this.drawables.Shield.uniforms.u_color=this.color),this.drawables.ArtifactsGreenGlow&&(this.drawables.ArtifactsGreenGlow.u_baseColor=this.color)}},{key:"addResonator",value:function(a,b,c,d){if(void 0===d&&(d=1),0>+b||+b>8)throw new Error("slot out of bounds for resonator");if(!(a in j["default"].qualityColors))throw new Error("level must be one of "+Object.keys(j["default"].qualityColors).join(" "));c=void 0===c?40:c;var e="Resonator"+ +b,f="Link"+ +b,g=b/8*2*Math.PI,h=new n["default"].Resonator,i=c*Math.cos(g),k=c*Math.sin(g),l=new p["default"]([0,0],b,c,q.vec4.clone(this.color),1);h.uniforms.u_color0=q.vec4.clone(j["default"].qualityColors[a]),h.local=q.mat4.clone(this.drawables.Portal.local),q.mat4.translate(h.local,h.local,q.vec3.fromValues(i/6,0,k/6)),h.updateMatrix(),l.updateMatrix(),this.addDrawable(f,l),this.addDrawable(e,h),this.addDrawable("Portal",this.drawables.Portal)}},{key:"removeResonator",value:function(a){if(0>+a||+a>8)throw new Error("slot out of bounds for resonator");var b="Resonator"+ +a,c=this.drawables[b]||null;c&&(this.removeDrawable(b),this._removeResonatorLink(a),this.addDrawable("Portal",this.drawables.Portal))}},{key:"addShield",value:function(){"Shield"in this.drawables||(this.addDrawable("Shield",new n["default"].Shield),q.mat4.scale(this.drawables.Shield.local,this.drawables.Shield.local,q.vec3.fromValues(12,12,12)),this.drawables.Shield.updateMatrix()),this.drawables.Shield.uniforms.u_color=this.color,this.applyTransform()}},{key:"addArtifact",value:function(a,b){var c=function(a){return q.mat4.rotateY(this.model,this.model,a/1e3),this.updateMatrix(),!0};b in this.drawables||this.addDrawable(b,a),this.drawables[b].onUpdate=c,this.applyTransform()}},{key:"addGlowMarker",value:function(a,b){var c="Artifacts"+a+"Glow";c in this.drawables||this.addDrawable(c,new n["default"][c]),this.drawables[c].uniforms.u_baseColor=q.vec4.clone(b)}}]),b}(l["default"]);c["default"]=r,b.exports=c["default"]},{"../constants":9,"../drawable/resonator-link":22,"../drawable/world":28,"../entity":31,"gl-matrix":1}],34:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a){d(this,f),this._gl=a};c["default"]=e,b.exports=c["default"]},{}],35:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./gl-buffer"),j=d(i),k=function(a){function b(a,c,d,f){e(this,b),f=f||a.STATIC_DRAW,h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,a.ARRAY_BUFFER,f),this.attributes=c,this.values=d,this.size=this.count=null,this._validate=!1,this.size=0,this.width=0;for(var g,i=0;i<this.attributes.length;i++)g=this.attributes[i],this.size+=4*g.size,this.width+=g.size;return this}return f(b,a),g(b,[{key:"validate",value:function(){this._validate&&this.values.length%this.width!==0&&console.warn("values array length is not an even multiple of the total size of the attributes")}},{key:"updateValues",value:function(a){return this.values=a,this.validate(),this.update()}},{key:"draw",value:function(a){var b,c=this._gl,d=0;this.glBuf?this.bindBuffer():this.update();for(var e=0;e<this.attributes.length;e++)b=this.attributes[e],b.name in a&&(c.enableVertexAttribArray(a[b.name]),c.vertexAttribPointer(a[b.name],b.size,c.FLOAT,!1,this.size,d),d+=4*b.size);return this}},{key:"eachAttribute",value:function(a,b){var c,d,e=0;if(a>=0&&a<this.attributes.length){for(d=0;a>d;d++)e+=this.attributes[d].size;for(c=this.attributes[a].size,d=e;d<this.values.length;d+=this.width)b(this.values.subarray(d,d+c))}return this}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./gl-buffer":36}],36:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../gl-bound"),j=d(i),k=function(a){function b(a,c,d){return e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.target=c||a.ARRAY_BUFFER,this.usage=d||a.STATIC_DRAW,this.glBuf=null,this.values=null,this}return f(b,a),g(b,[{key:"bindBuffer",value:function(){return this.values?(this.glBuf||(this.glBuf=this._gl.createBuffer()),this._gl.bindBuffer(this.target,this.glBuf),this):(console.warn("trying to update a buffer with no values."),!1)}},{key:"unbindBuffer",value:function(){return this}},{key:"update",value:function(){return this.bindBuffer(),this._gl.bufferData(this.target,this.values,this.usage),this}},{key:"setValues",value:function(a,b){return this.values?this.values.set(a,b):this.values=a,this.update(),this}},{key:"deleteWithin",value:function(a,b){if(!this.values)return console.warn("Trying to splice a buffer that has no values."),!1;var c=b-a,d=new this.values.constructor(c);return this.values.set(this.values.subarray(b),a),this.values.set(d,this.values.length-c),this.update(),this}},{key:"map",value:function(a,b,c){b=void 0===b?0:b,c=void 0===c?this.values.length:c;for(var d=b;c>d;d++)this.values[d]=a(this.values[d],d);return this}},{key:"updateBuffer",value:function(a){return this.values=a,this.update()}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"../gl-bound":34}],37:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./gl-buffer"),j=d(i),k=function(a){function b(a,c,d,f){return e(this,b),f=f||a.STATIC_DRAW,h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,a.ELEMENT_ARRAY_BUFFER,f),this.mode=d,this.values=c,this.count=null,this}return f(b,a),g(b,[{key:"draw",value:function(){var a=this._gl;return this.glBuf?this.bindBuffer():this.update(),a.drawElements(this.mode,this.values.length,a.UNSIGNED_SHORT,0),this}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./gl-buffer":36}],38:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./constants"),f=d(e),g=a("./engine"),h=d(g),i=a("./asset-loader"),j=a("./drawable/inventory"),k=d(j),l=a("./drawable/world"),m=d(l),n=a("./drawable/portal-link"),o=d(n),p=a("./drawable/resonator-link"),q=d(p),r=a("./drawable/spherical-portal-link"),s=d(r),t=a("./drawable/atmosphere"),u=d(t),v=a("./drawable/textured-sphere"),w=d(v),x=a("./drawable/particle-portal"),y=d(x),z=a("./entity/inventory"),A=d(z),B=a("./entity/portal"),C=d(B),D=a("./orbit-controls"),E=d(D),F=a("./utils"),G=a("./animation/easing"),H=d(G),I=a("./animation/animation"),J=d(I);c["default"]={Constants:f["default"],Engine:h["default"],Utilities:{loadResource:i.loadResource,resetGL:F.resetGL,setParams:F.setParams,disco:F.disco,generateArtifacts:F.generateArtifacts,Ease:H["default"],Animation:J["default"]},Drawables:{Inventory:k["default"],World:m["default"],ResonatorLink:q["default"],PortalLink:o["default"],SphericalPortalLink:s["default"],Atmosphere:u["default"],TexturedSphere:w["default"],ParticlePortal:y["default"]},Entities:{World:{Portal:C["default"]},Inventory:A["default"]},Controls:{Orbit:E["default"]},VERSION:"0.20.0"},b.exports=c["default"]},{"./animation/animation":4,"./animation/easing":5,"./asset-loader":6,"./constants":9,"./drawable/atmosphere":11,"./drawable/inventory":14,"./drawable/particle-portal":19,"./drawable/portal-link":21,"./drawable/resonator-link":22,"./drawable/spherical-portal-link":25,"./drawable/textured-sphere":26,"./drawable/world":28,"./engine":30,"./entity/inventory":32,"./entity/portal":33,"./orbit-controls":46,"./utils":53}],39:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./gl-bound"),j=d(i),k="triangles",l="lines",m=function(a){function b(a,c,d,f){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.attributes=c,this.faces=d,this.lines=f,this.mode=k,this.bounds=null,this.center=null}return f(b,a),g(b,[{key:"draw",value:function(a){this.attributes.draw(a),this.mode===k?this.faces.draw():this.mode===l&&this.lines.draw()}},{key:"boundingBox",value:function(a){if(!this.bounds){a=void 0===a?0:a;var b={max:null,min:null};this.attributes.eachAttribute(a,function(a){0!==Array.prototype.reduce.call(a,function(a,b){return a+b},0)&&(b.max=b.max?b.max.map(function(b,c){return Math.max(b,a[c])}):Array.prototype.slice.call(a),b.min=b.min?b.min.map(function(b,c){return Math.min(b,a[c])}):Array.prototype.slice.call(a))}),this.bounds=b}return this.bounds}},{key:"centerOfMass",value:function(a){if(!this.center){a=void 0===a?0:a;var b=null,c=0;this.attributes.eachAttribute(a,function(a){0!==Array.prototype.reduce.call(a,function(a,b){return a+b},0)&&(c++,b=b?b.map(function(b,c){return b+a[c]}):Array.prototype.slice.call(a))}),b.map(function(a){return a/c}),this.center=b}return this.center}},{key:"boundingBoxCenter",value:function(a){return this.bounds||this.boundingBox(a),this.bounds.max.map(function(a,b){return(a-this.bounds.min[b])/2}.bind(this))}}]),b}(j["default"]);m.MODE_LINES=l,m.MODE_TRIANGLES=k,c["default"]=m,b.exports=c["default"]},{"./gl-bound":34}],40:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){var b,c,d,e,f,g=new DataView(a.buffer,a.byteOffset,a.byteLength),h=0,i=g.getUint32(h);h+=4;for(var j=[],k=0;i>k;k++){for(b=g.getUint32(h),1!=b&&16!=b&&console.warn("unknown type "+b),h+=4,c=g.getUint32(h),h+=4,d=g.getUint16(h),h+=2,f="",e=0;d>e;e++)f+=String.fromCharCode(g.getUint8(h+e));h+=d,j.push(new l["default"](f,c))}return j}Object.defineProperty(c,"__esModule",{value:!0});var h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../mesh"),j=d(i),k=a("../vertex-attribute"),l=d(k),m=a("../gl/gl-index"),n=d(m),o=a("../gl/gl-attribute"),p=d(o),q=a("java-deserializer"),r=d(q),s=function(a){function b(a,c){e(this,b);var d=new r["default"](c),f=d.getContents(),i=f[0].elements,j=f[3],k=g(j),l=new n["default"](a,f[1].elements,a.TRIANGLES),m=new p["default"](a,k,i),o=new n["default"](a,f[2].elements,a.LINES);h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,m,l,o)}return f(b,a),b}(j["default"]);c["default"]=s,b.exports=c["default"]},{"../gl/gl-attribute":35,"../gl/gl-index":37,"../mesh":39,"../vertex-attribute":54,"java-deserializer":2}],41:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});for(var g=(function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}}),h=a("../mesh"),i=d(h),j=a("../vertex-attribute"),k=d(j),l=a("../gl/gl-index"),m=d(l),n=a("../gl/gl-attribute"),o=d(n),p=96,q=4,r=6,s=9,t=[0,0,1,1],u=[1,0,1,0],v=[],w=0;p>w;w++)v.push({x:Math.random()-.5,y:.4*Math.random()-.2,z:Math.random()-.5,a_scale:10*(.1+.9*Math.random()),a_speed:6*(.5+.5*Math.random())});var x=function(a){function b(a){e(this,b);var c=[];c.push(new k["default"]("a_position",3)),c.push(new k["default"]("a_texCoord0",2)),c.push(new k["default"]("a_scale",1)),c.push(new k["default"]("a_speed",1)),c.push(new k["default"]("a_portalIndex",1)),c.push(new k["default"]("a_index",1));var d,f,h,i=new Float32Array(p*q*s),j=0;for(f=0;p>f;f++)for(d=v[f],h=0;q>h;h++)i[j*s+0]=d.x,i[j*s+1]=d.y,i[j*s+2]=d.z,i[j*s+3]=t[h],i[j*s+4]=u[h],i[j*s+5]=d.a_scale,i[j*s+6]=d.a_speed,i[j*s+7]=0,i[j*s+8]=f,j++;var l=new Uint16Array(p*r),n=[0,1,2,1,3,2];j=0;var w=0;for(f=0;p>f;f++){for(h=0;r>h;h++)l[w+h]=j+n[h];w+=6,j+=4}g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,new o["default"](a,c,i),new m["default"](a,l,a.TRIANGLES))}return f(b,a),b}(i["default"]);c["default"]=x,b.exports=c["default"]},{"../gl/gl-attribute":35,"../gl/gl-index":37,"../mesh":39,"../vertex-attribute":54}],42:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){return Math.sin(Math.PI*Math.max(Math.min(1,a),0)/2)}function h(a,b,c,d,e,f,g,h,i,j){var k=b*w;a[k+0]=c,a[k+1]=d,a[k+2]=e,a[k+3]=i,a[k+4]=f,a[k+5]=g,a[k+6]=h[0],a[k+7]=h[2],a[k+8]=j[0],a[k+9]=j[1],a[k+10]=j[2],a[k+11]=j[3]}function i(a,b,c,d,e){d=void 0===d?1:Math.max(Math.min(d,1),0),e=void 0===e?1:Math.max(Math.min(e,1),0);var f=new Float32Array(v*w),g=Math.sqrt((b[0]-a[0])*(b[0]-a[0])+(b[1]-a[1])*(b[1]-a[1])),i=B[1],j=i+Math.min(30,.08*g),k=(d+e)/2,l=.01*g,m=.1+.3*k,n=t.vec3.fromValues(b[0],0,b[1]);t.vec3.subtract(n,n,t.vec3.fromValues(a[0],0,a[1]));var o=t.vec3.fromValues(0,1,0),p=t.vec3.cross(t.vec3.create(),n,o);t.vec3.normalize(p,p);for(var q=2*u,r=0;u>r;r++){var s=x[r],C=d+s*(e-d),D=.6+.35*C,E=s*l,F=a[0]+s*n[0],G=a[1]+s*n[2],H=i+y[r]*(j-i),I=z[r],J=t.vec4.lerp(t.vec4.create(),A,c,.25+.75*C);J[3]=D,h(f,2*r,F+I*p[0],H,G+I*p[2],0,E,o,m,J),h(f,2*r+1,F-I*p[0],H,G-I*p[2],.5,E,o,m,J),h(f,q+2*r,F,H+I,G,0,E,p,m,J),h(f,q+2*r+1,F,H-I,G,.5,E,p,m,J),h(f,2*q+2*r,F,H-I,G,.5,E,p,m,J),h(f,2*q+2*r+1,F,0,G,1,E,p,m,J)}return f}function j(a){for(var b=new Uint16Array(144),c=0,d=0;3>d;d++){for(var e=0;u-1>e;e++)b[c+0]=a+1,b[c+1]=a+0,b[c+2]=a+2,b[c+3]=a+1,b[c+4]=a+2,b[c+5]=a+3,a+=2,c+=6;a+=2}return b}Object.defineProperty(c,"__esModule",{value:!0});for(var k=(function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}}),l=a("../mesh"),m=d(l),n=a("../vertex-attribute"),o=d(n),p=a("../gl/gl-index"),q=d(p),r=a("../gl/gl-attribute"),s=d(r),t=a("gl-matrix"),u=9,v=6*u,w=12,x=new Array(u),y=new Array(u),z=new Array(u),A=t.vec4.fromValues(.46,.18,.18,1),B=t.vec4.create(),C=0;u>C;C++){var D=C/8;x[C]=D,z[C]=3+-1.5*Math.pow(g(2*Math.abs(D-.5)),4),y[C]=g(1-2*Math.abs(D-.5))}var E=function(a){function b(a,c,d,f,g,h){e(this,b);var l=i(c,d,f,g,h),m=j(0),n=[];n.push(new o["default"]("a_position",4)),n.push(new o["default"]("a_texCoord0",4)),n.push(new o["default"]("a_color",4));var p=new s["default"](a,n,l,a.DYNAMIC_DRAW),r=new q["default"](a,m,a.TRIANGLES);k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,p,r)}return f(b,a),b}(m["default"]);c["default"]=E,b.exports=c["default"]},{"../gl/gl-attribute":35,"../gl/gl-index":37,"../mesh":39,"../vertex-attribute":54,"gl-matrix":1}],43:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){return Math.sin(Math.PI*Math.max(Math.min(1,a),0)/2)}function h(a,b,c,d,e,f,g,h,i,j){var k=b*w;a[k+0]=c,a[k+1]=d,a[k+2]=e,a[k+3]=i,a[k+4]=f,a[k+5]=g,a[k+6]=h[0],a[k+7]=h[2],a[k+8]=j[0],a[k+9]=j[1],a[k+10]=j[2],a[k+11]=j[3]}function i(a,b,c,d){d=void 0===d?1:Math.max(Math.min(d,1),0);var e=new Float32Array(v*w),f=Math.sqrt((b[0]-a[0])*(b[0]-a[0])+(b[1]-a[1])*(b[1]-a[1])),g=2/30*f,i=.9+.1*d,j=.65+.35*d,k=.1+.3*d,l=t.vec4.lerp(t.vec4.create(),C,c,.1+.85*d);l[3]=.75+.25*d*l[3];var m=t.vec3.fromValues(b[0],0,b[1]);t.vec3.subtract(m,m,t.vec3.fromValues(a[0],0,a[1]));var n=t.vec3.cross(t.vec3.create(),m,F);t.vec3.normalize(n,n);for(var o=2*u,p=5*(a[0]+a[1]-Math.floor(a[0]+a[1])),q=0;u>q;q++){var r=x[q],s=a[0]+r*m[0],A=a[1]+r*m[2],B=E+r*(D-E)+i*y[q],G=j*z[q],H=r*g;h(e,2*q+0,s+G*n[0],B,A+G*n[2],0,H+p,F,k,l),h(e,2*q+1,s-G*n[0],B,A-G*n[2],1,H+p,F,k,l),h(e,o+2*q+0,s,B+G,A,0,H+p,n,k,l),h(e,o+2*q+1,s,B-G,A,1,H+p,n,k,l)}return e}function j(a){var b=new Uint16Array(48),c=0;for(A=0;2>A;A++){for(var d=0;u-1>d;d++)b[c+0]=a+1,b[c+1]=a+0,b[c+2]=a+2,b[c+3]=a+1,b[c+4]=a+2,b[c+5]=a+3,a+=2,c+=6;a+=2}return b}Object.defineProperty(c,"__esModule",{value:!0});for(var k=(function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}}),l=a("../mesh"),m=d(l),n=a("../vertex-attribute"),o=d(n),p=a("../gl/gl-index"),q=d(p),r=a("../gl/gl-attribute"),s=d(r),t=a("gl-matrix"),u=5,v=4*u,w=12,x=new Array(u),y=new Array(u),z=new Array(u),A=0;u>A;A++){var B=A/4;x[A]=B,z[A]=3.5*Math.max(1-Math.pow(g(2*Math.abs(B-.5)),4),.2),y[A]=g(1-2*Math.abs(B-.5))}var C=t.vec4.fromValues(.78,.31,.31,1),D=0,E=0,F=t.vec3.fromValues(0,1,0),G=function(a){function b(a,c,d,f,g,h){e(this,b);var l=d/8*2*Math.PI,m=t.vec2.create(),n=t.vec2.fromValues(f*Math.cos(l),f*Math.sin(l));t.vec2.add(m,c,n);var p=i(c,m,g,h),r=j(0),u=[];u.push(new o["default"]("a_position",4)),u.push(new o["default"]("a_texCoord0",4)),u.push(new o["default"]("a_color",4));var v=new s["default"](a,u,p,a.DYNAMIC_DRAW),w=new q["default"](a,r,a.TRIANGLES);k(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,v,w)}return f(b,a),b}(m["default"]);c["default"]=G,b.exports=c["default"]},{"../gl/gl-attribute":35,"../gl/gl-index":37,"../mesh":39,"../vertex-attribute":54,"gl-matrix":1}],44:[function(a,b,c){
"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c){var d,e,f,g,h,i,j,k,m,n,o,p=2*Math.PI,r=Math.PI,s=new Float32Array((b+1)*(c+1)*8),t=[],u=[],v=0,w=[];for(b=Math.max(3,b||8),c=Math.max(2,c||6),d=0;b>=d;d++){for(n=[],e=0;c>=e;e++)f=e/b,g=d/c,h=q.vec3.fromValues(-a*Math.cos(f*p)*Math.sin(g*r),a*Math.cos(g*r),a*Math.sin(f*p)*Math.sin(g*r)),s[8*v+0]=h[0],s[8*v+1]=h[1],s[8*v+2]=h[2],s[8*v+3]=f,s[8*v+4]=g,q.vec3.normalize(h,h),s[8*v+5]=h[0],s[8*v+6]=h[1],s[8*v+7]=h[2],n.push(v++);u.push(n)}for(d=0;b>d;d++)for(e=0;c>e;e++)i=u[d][e+1],j=u[d][e],k=u[d+1][e],m=u[d+1][e+1],Math.abs(s[8*i+1])===a?(t.push.apply(t,[i,k,m]),s[8*i+3]=(s[8*i+3]+s[8*j+3])/2):Math.abs(s[8*k+1])===a?(t.push.apply(t,[i,j,k]),s[8*k+3]=(s[8*k+3]+s[8*m+3])/2):(t.push.apply(t,[i,j,m]),t.push.apply(t,[j,k,m]));return o=new Uint16Array(t.length),t.forEach(function(a,b){o[b]=a}),w.push(new l["default"]("a_position",3)),w.push(new l["default"]("a_texCoord0",2)),w.push(new l["default"]("a_normal",3)),{values:s,faces:o,attributes:w}}Object.defineProperty(c,"__esModule",{value:!0});var h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../mesh"),j=d(i),k=a("../vertex-attribute"),l=d(k),m=a("../gl/gl-index"),n=d(m),o=a("../gl/gl-attribute"),p=d(o),q=a("gl-matrix"),r=function(a){function b(a,c,d,f){e(this,b);var i=g(c,d,f),j=new p["default"](a,i.attributes,i.values),k=new n["default"](a,i.faces,a.TRIANGLES);h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,j,k)}return f(b,a),b}(j["default"]);c["default"]=r,b.exports=c["default"]},{"../gl/gl-attribute":35,"../gl/gl-index":37,"../mesh":39,"../vertex-attribute":54,"gl-matrix":1}],45:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){return Math.sin(Math.PI*Math.max(Math.min(1,a),0)/2)}function h(a,b){var c=a[0],d=b[0],e=b[1]-a[1],f=Math.sin(e)*Math.cos(d),g=Math.cos(c)*Math.sin(d)-Math.sin(c)*Math.cos(d)*Math.cos(e);return(Math.atan2(f,g)+2*Math.PI)%(2*Math.PI)}function i(a,b,c){var d=Math.asin(Math.sin(a[0])*Math.cos(c)+Math.cos(a[0])*Math.sin(c)*Math.cos(b)),e=a[1]+Math.atan2(Math.sin(b)*Math.sin(c)*Math.cos(a[0]),Math.cos(c)-Math.sin(a[0])*Math.sin(d));return e=(e+3*Math.PI)%(2*Math.PI)-Math.PI,y.vec2.fromValues(d,e)}function j(a,b,c){var d=y.mat4.create();return y.mat4.rotateY(d,d,a[1]),y.mat4.rotateZ(d,d,a[0]-Math.PI/2),y.mat4.rotateY(d,d,-h(a,b)),y.mat4.translate(d,d,[0,c,0]),d}function k(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a[0])*Math.cos(b[0])*Math.sin(d/2)*Math.sin(d/2);return 2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e))}function l(a){return y.vec2.fromValues(a[0]*Math.PI/180,a[1]*Math.PI/180)}function m(a,b,c,d,e,f,g){var h=b*z;y.vec3.normalize(e,e),a[h+0]=c[0],a[h+1]=c[1],a[h+2]=c[2],a[h+3]=f,a[h+4]=d[0],a[h+5]=d[1],a[h+6]=e[0],a[h+7]=e[1],a[h+8]=e[2],a[h+9]=g[0],a[h+10]=g[1],a[h+11]=g[2],a[h+12]=g[3]}function n(a,b,c,d,e,f){var n=l(b),o=l(c),p=k(n,o),q=h(n,o),r=p*a,s=Math.max(Math.floor(p/Math.PI*50)+1,8);e=void 0===e?1:Math.max(Math.min(e,1),0),f=void 0===f?1:Math.max(Math.min(f,1),0);for(var t=new Float32Array(s*z*6),u=B[1],v=u+Math.min(.01*a,.08*r),w=(e+f)/2,x=.01*r,C=.1+.3*w,D=y.vec3.fromValues(0,1,0),E=y.vec3.fromValues(0,0,1),F=2*s,G=0;s>G;G++){var H=G/(s-1),I=e+H*(f-e),J=.6+.35*I,K=H*x,L=0===H?n:i(n,q,p*H),M=i(n,q,p*(H+1/(s-1))),N=j(L,M,a),O=y.vec3.fromValues(0,u+(3+-1.5*Math.pow(g(2*Math.abs(H-.5)),4))*(v-u),0),P=.01*a*g(1-2*Math.abs(H-.5)),Q=y.vec3.fromValues(0,P,0),R=y.vec3.fromValues(0,0,P),S=y.vec4.lerp(y.vec4.create(),A,d,.25+.75*I);S[3]=J,m(t,2*G,y.vec3.transformMat4(y.vec3.create(),y.vec3.add(y.vec3.create(),O,R),N),y.vec2.fromValues(0,K),y.vec3.transformMat4(y.vec3.create(),D,N),C,S),m(t,2*G+1,y.vec3.transformMat4(y.vec3.create(),y.vec3.subtract(y.vec3.create(),O,R),N),y.vec2.fromValues(.5,K),y.vec3.transformMat4(y.vec3.create(),D,N),C,S),m(t,F+2*G,y.vec3.transformMat4(y.vec3.create(),y.vec3.add(y.vec3.create(),O,Q),N),y.vec2.fromValues(0,K),y.vec3.transformMat4(y.vec3.create(),E,N),C,S),m(t,F+2*G+1,y.vec3.transformMat4(y.vec3.create(),y.vec3.subtract(y.vec3.create(),O,Q),N),y.vec2.fromValues(.5,K),y.vec3.transformMat4(y.vec3.create(),E,N),C,S),m(t,2*F+2*G,y.vec3.transformMat4(y.vec3.create(),y.vec3.subtract(y.vec3.create(),O,Q),N),y.vec2.fromValues(.5,K),y.vec3.transformMat4(y.vec3.create(),E,N),C,S),m(t,2*F+2*G+1,y.vec3.transformMat4(y.vec3.create(),y.vec3.fromValues(0,0,0),N),y.vec2.fromValues(1,K),y.vec3.transformMat4(y.vec3.create(),E,N),C,S)}return t}function o(a,b){for(var c=new Uint16Array(6*(b-1)*3),d=0,e=0;3>e;e++){for(var f=0;b-1>f;f++)c[d+0]=a+1,c[d+1]=a+0,c[d+2]=a+2,c[d+3]=a+1,c[d+4]=a+2,c[d+5]=a+3,a+=2,d+=6;a+=2}return c}Object.defineProperty(c,"__esModule",{value:!0});var p=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},q=a("../mesh"),r=d(q),s=a("../vertex-attribute"),t=d(s),u=a("../gl/gl-index"),v=d(u),w=a("../gl/gl-attribute"),x=d(w),y=a("gl-matrix"),z=13,A=y.vec4.fromValues(.46,.18,.18,1),B=y.vec4.create(),C=function(a){function b(a,c,d,f,g,h,i){e(this,b);var j=n(c,d,f,g,h,i),k=j.length,l=Math.floor(k/z/6),m=o(0,l),q=[];q.push(new t["default"]("a_position",4)),q.push(new t["default"]("a_texCoord0",2)),q.push(new t["default"]("a_normal",3)),q.push(new t["default"]("a_color",4));var r=new x["default"](a,q,j,a.DYNAMIC_DRAW),s=new v["default"](a,m,a.TRIANGLES);return p(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,r,s),this}return f(b,a),b}(r["default"]);c["default"]=C,b.exports=c["default"]},{"../gl/gl-attribute":35,"../gl/gl-index":37,"../mesh":39,"../vertex-attribute":54,"gl-matrix":1}],46:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return{identifier:a.identifier,x:a.clientX,y:a.clientY}}function f(a,b){for(var c=0;c<a.length;c++)if(a[c].identifier==b.identifier)return c;return-1}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./utils"),i=a("gl-matrix"),j=Math.PI/2,k=5,l=function(){function a(b,c,e,f){d(this,a),f=f||{},this.element=b,this.camera=c,this.distance=e||2,this.distanceTarget=this.distance;var g={zoomDamp:.5,distanceScale:.5,distanceMax:1e3,distanceMin:1,touchScale:.1,wheelScale:.01,friction:.2,target:i.vec3.create(),allowZoom:!0};this.options=h.setParams(g,f),this.camera.lookAt(this.options.target),this.mouse={x:0,y:0},this.mouseOnDown={x:0,y:0},this.rotation={x:0,y:0},this.target={x:3*Math.PI/2,y:Math.PI/6},this.targetOnDown={x:0,y:0},this.overRenderer=!1,this.mouseMove=this._onMouseMove.bind(this),this.mouseUp=this._onMouseUp.bind(this),this.mouseOut=this._onMouseOut.bind(this),this.mouseDown=this._onMouseDown.bind(this),this.mouseWheel=this._onMouseWheel.bind(this),this.touches=[],this.touchDelta=0,this.touchMove=this._onTouchMove.bind(this),this.touchEnd=this._onTouchEnd.bind(this),this.touchLeave=this._onTouchLeave.bind(this),this.touchStart=this._onTouchStart.bind(this),this.mouseOver=function(){this.overRenderer=!0}.bind(this),this.mouseOut=function(){this.overRenderer=!1}.bind(this),this.enabled=!1}return g(a,[{key:"disable",value:function(){this.element.removeEventListener("mousedown",this.mouseDown,!1),this.element.removeEventListener("mousemove",this.mouseMove,!1),this.element.removeEventListener("mouseup",this.mouseUp,!1),this.element.removeEventListener("mouseout",this.mouseOut,!1),this.element.removeEventListener("touchstart",this.touchStart,!1),this.element.removeEventListener("touchmove",this.touchMove,!1),this.element.removeEventListener("touchend",this.touchEnd,!1),this.element.removeEventListener("touchleave",this.touchLeave,!1),this.element.removeEventListener("mousewheel",this.mouseWheel,!1),this.element.removeEventListener("mouseover",this.mouseOver,!1),this.element.removeEventListener("mouseout",this.mouseOut,!1),this.enabled=!1}},{key:"enable",value:function(){this.element.addEventListener("mousedown",this.mouseDown,!1),this.options.allowZoom&&this.element.addEventListener("mousewheel",this.mouseWheel,!1),this.element.addEventListener("touchstart",this.touchStart,!1),this.element.addEventListener("mouseover",this.mouseOver,!1),this.element.addEventListener("mouseout",this.mouseOut,!1),this.enabled=!0}},{key:"updateView",value:function(){var a=this.target.x-this.rotation.x,b=this.target.y-this.rotation.y,c=this.distanceTarget-this.distance,d=i.vec3.create();(Math.abs(a)>1e-5||Math.abs(b)>1e-5||Math.abs(c)>1e-5)&&(this.rotation.x+=a*this.options.friction,this.rotation.y+=b*this.options.friction,this.distance+=c*this.options.distanceScale,d[0]=this.distance*Math.sin(this.rotation.x)*Math.cos(this.rotation.y)+this.options.target[0],d[1]=this.distance*Math.sin(this.rotation.y)+this.options.target[1],d[2]=this.distance*Math.cos(this.rotation.x)*Math.cos(this.rotation.y)+this.options.target[2],this.camera.setPosition(d))}},{key:"_updateTargets",value:function(){var a=this.distance<k?this.distance:Math.log(this.distance),b=a/this.options.zoomDamp;this.target.x=this.targetOnDown.x+.005*(this.mouse.x-this.mouseOnDown.x)*b,this.target.y=this.targetOnDown.y+.005*(this.mouse.y-this.mouseOnDown.y)*b,this.target.y=this.target.y>j?j:this.target.y,this.target.y=this.target.y<-j?-j:this.target.y}},{key:"_onMouseDown",value:function(a){a.preventDefault(),this.element.addEventListener("mousemove",this.mouseMove,!1),this.element.addEventListener("mouseup",this.mouseUp,!1),this.element.addEventListener("mouseout",this.mouseOut,!1),this.mouseOnDown.x=-a.clientX,this.mouseOnDown.y=a.clientY,this.targetOnDown.x=this.target.x,this.targetOnDown.y=this.target.y,this.element.style.cursor="move"}},{key:"_onMouseMove",value:function(a){this.mouse.x=-a.clientX,this.mouse.y=a.clientY,this._updateTargets()}},{key:"_onMouseUp",value:function(a){this._onMouseOut(a),this.element.style.cursor="auto"}},{key:"_onMouseOut",value:function(){this.element.removeEventListener("mousemove",this.mouseMove,!1),this.element.removeEventListener("mouseup",this.mouseUp,!1),this.element.removeEventListener("mouseout",this.mouseOut,!1)}},{key:"_onMouseWheel",value:function(a){return this.overRenderer&&this._zoom(a.wheelDeltaY*this.options.wheelScale*(this.distance<k?this.distance:Math.log(this.distance))),!0}},{key:"_onTouchStart",value:function(a){a.preventDefault(),0===this.touches.length&&(this.element.addEventListener("touchmove",this.touchMove,!1),this.element.addEventListener("touchend",this.touchEnd,!1),this.element.addEventListener("touchleave",this.touchLeave,!1));for(var b=0;b<a.changedTouches.length;b++)this.touches.push(e(a.changedTouches[b]));if(1===this.touches.length)this.mouseOnDown.x=-this.touches[0].x,this.mouseOnDown.y=this.touches[0].y,this.targetOnDown.x=this.target.x,this.targetOnDown.y=this.target.y;else if(2===this.touches.length&&this.options.allowZoom){var c=Math.abs(this.touches[0].x-this.touches[1].x),d=Math.abs(this.touches[0].y-this.touches[1].y);this.touchDelta=Math.sqrt(c*c+d*d)}this.element.style.cursor="move"}},{key:"_onTouchMove",value:function(a){for(var b=a.changedTouches,c=b.length,d=0;c>d;d++){var g=f(this.touches,b[d]);g>=0?this.touches.splice(g,1,e(b[d])):console.log("could not find event ",b[d])}if(1===this.touches.length)this.mouse.x=-this.touches[0].x,this.mouse.y=this.touches[0].y,this.updateTargets();else if(2===this.touches.length&&this.options.allowZoom){var h=this.touches[0].x-this.touches[1].x,i=this.touches[0].y-this.touches[1].y,j=Math.sqrt(h*h+i*i);this._zoom((j-this.touchDelta)*this.options.touchScale),this.touchDelta=j}}},{key:"_removeTouches",value:function(a){for(var b=a.changedTouches,c=b.length,d=0;c>d;d++){var e=f(this.touches,b[d]);e>=0&&this.touches.splice(e,1)}0===this.touches.length?(this.element.removeEventListener("touchmove",this.touchMove,!1),this.element.removeEventListener("touchend",this.touchEnd,!1),this.element.removeEventListener("touchleave",this.touchLeave,!1)):1===this.touches.length&&(this.mouseOnDown.x=-this.touches[0].x,this.mouseOnDown.y=this.touches[0].y,this.targetOnDown.x=this.target.x,this.targetOnDown.y=this.target.y)}},{key:"_onTouchEnd",value:function(a){this._removeTouches(a),this.element.style.cursor="auto"}},{key:"_onTouchLeave",value:function(a){this._removeTouches(a)}},{key:"_onTouchCancel",value:function(a){this._removeTouches(a)}},{key:"_zoom",value:function(a){this.distanceTarget-=a,this.distanceTarget=Math.min(this.distanceTarget,this.options.distanceMax),this.distanceTarget=Math.max(this.distanceTarget,this.options.distanceMin)}}]),a}();c["default"]=l,b.exports=c["default"]},{"./utils":53,"gl-matrix":1}],47:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){if(/precision mediump float/g.test(a))return a;var b=a.split("\n");return b.splice(1,0,"#ifdef GL_ES","precision mediump float;","#endif"),b.join("\n")}function h(a,b,c,d){var e,f,g=c.name,h=a.getUniformLocation(b,g),i=c.type,j=!1,k=!0;if(c.size>1&&d)switch(i){case a.FLOAT:e=a.uniform1fv,f=Float32Array,k=!1;break;case a.INT:case a.BOOL:case a.SAMPLER_2D:case a.SAMPLER_CUBE:e=a.uniform1iv,f=Uint16Array,k=!1}if(k)switch(i){case a.FLOAT:e=a.uniform1f;break;case a.FLOAT_VEC2:e=a.uniform2fv,f=d?Float32Array:new Float32Array(2);break;case a.FLOAT_VEC3:e=a.uniform3fv,f=d?Float32Array:new Float32Array(3);break;case a.FLOAT_VEC4:e=a.uniform4fv,f=d?Float32Array:new Float32Array(4);break;case a.INT:case a.BOOL:case a.SAMPLER_2D:case a.SAMPLER_CUBE:e=a.uniform1i;break;case a.INT_VEC2:case a.BOOL_VEC2:e=a.uniform2iv,f=d?Uint16Array:new Uint16Array(2);break;case a.INT_VEC3:case a.BOOL_VEC3:e=a.uniform3iv,f=d?Uint16Array:new Uint16Array(3);break;case a.INT_VEC4:case a.BOOL_VEC4:e=a.uniform4iv,f=d?Uint16Array:new Uint16Array(4);break;case a.FLOAT_MAT2:j=!0,e=a.uniformMatrix2fv;break;case a.FLOAT_MAT3:j=!0,e=a.uniformMatrix3fv;break;case a.FLOAT_MAT4:j=!0,e=a.uniformMatrix4fv}if(e.bind)e=e.bind(a);else{var l=e;e=function(){l.apply(a,arguments)}}return d&&f?function(a){e(h,new f(a))}:j?function(a){e(h,!1,a)}:f?function(a){f.set(a.toFloat32Array?a.toFloat32Array():a),e(h,f)}:function(a){e(h,a)}}Object.defineProperty(c,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}};c.fixPrecision=g;var k=a("./gl-bound"),l=d(k),m=function(a){function b(a,c,d){e(this,b),j(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.program=null,this.vertexSource=g(c),this.fragmentSource=d,this.attributes={},this.uniforms={}}return f(b,a),i(b,[{key:"init",value:function(){var a,b,c=this._gl;if(a=c.createShader(c.VERTEX_SHADER),c.shaderSource(a,this.vertexSource),c.compileShader(a),!c.getShaderParameter(a,c.COMPILE_STATUS))throw console.warn(c.getShaderInfoLog(a)),console.error("could not compile vertex shader: "+this.vertexSource),"Vertex shader compile error!";if(b=c.createShader(c.FRAGMENT_SHADER),c.shaderSource(b,this.fragmentSource),c.compileShader(b),!c.getShaderParameter(b,c.COMPILE_STATUS))throw console.warn(c.getShaderInfoLog(b)),console.error("could not compile fragment shader: "+this.fragmentSource),"Fragment shader compile error!";if(this.program=c.createProgram(),c.attachShader(this.program,a),c.attachShader(this.program,b),c.linkProgram(this.program),!c.getProgramParameter(this.program,c.LINK_STATUS))throw"Could not link program";c.useProgram(this.program),this._setupLocations()}},{key:"use",value:function(a){var b=this._gl;this.program?b.useProgram(this.program):this.init(),a(this.attributes,this.uniforms)}},{key:"_setupLocations",value:function(){for(var a,b,c=this._gl,d=this.program,e=c.getProgramParameter(d,c.ACTIVE_ATTRIBUTES),f=0;e>f;f++)a=c.getActiveAttrib(d,f),this.attributes[a.name]=c.getAttribLocation(d,a.name);for(e=c.getProgramParameter(d,c.ACTIVE_UNIFORMS),f=0;e>f;f++)a=c.getActiveUniform(d,f),b=a.name,b="]"==b[b.length-1]?b.substr(0,b.length-3):b,this.uniforms[b]=h(c,d,a,a.name!=b)}}]),b}(l["default"]);c["default"]=m},{"./gl-bound":34}],48:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../program"),j=d(i),k=a("../utils"),l=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d)}return f(b,a),g(b,[{key:"use",value:function(a){this.program||this.init();var b=this._gl;b.useProgram(this.program),b.disable(b.CULL_FACE),b.enable(b.BLEND),b.depthMask(!1),b.blendEquation(b.FUNC_ADD),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA),a(this.attributes,this.uniforms),k.resetGL(b)}}]),b}(j["default"]);c["default"]=l,b.exports=c["default"]},{"../program":47,"../utils":53}],49:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../program"),j=d(i),k=a("../utils"),l=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c,d)}return f(b,a),g(b,[{key:"use",value:function(a){this.program||this.init();var b=this._gl;b.useProgram(this.program),b.enable(b.DEPTH_TEST),b.enable(b.CULL_FACE),b.frontFace(b.CCW),b.cullFace(b.BACK),b.depthMask(!0),a(this.attributes,this.uniforms),k.resetGL(b)}}]),b}(j["default"]);c["default"]=l,b.exports=c["default"]},{"../program":47,"../utils":53}],50:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./gl-bound"),j=d(i),k=a("gl-matrix"),l=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.manager=c,this.viewProject=k.mat4.create(),this.view=k.mat4.create(),this.project=k.mat4.create(),this.elapsed=0}return f(b,a),g(b,[{key:"updateView",value:function(a){this.view=a.view,this.project=a.project,k.mat4.multiply(this.viewProject,this.project,this.view)}},{key:"render",value:function(){console.warn("base class renders nothing.")}},{key:"updateTime",value:function(a){this.elapsed+=a}}]),b}(j["default"]);c["default"]=l,b.exports=c["default"]},{"./gl-bound":34,"gl-matrix":1}],51:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("../renderer"),j=d(i),k=a("../drawable"),l=d(k),m=function(a){function b(a,c){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,c),this.drawables=[]}return f(b,a),g(b,[{key:"addDrawable",value:function(a){if(!a instanceof l["default"])throw"Drawables must always inherit from the base Drawable";return a.init(this.manager)?(a.updateView&&a.updateView(this.viewProject,null),void this.drawables.push(a)):(console.warn("could not initialize drawable: ",a),!1)}},{key:"removeDrawable",value:function(a,b){for(var c=0;c<this.drawables.length;c++)if(this.drawables[c]===a)return this.drawables.splice(c,1),b?(a.dispose(),!0):a;return!1}},{key:"addEntity",value:function(a){for(var b in a.drawables)this.addDrawable(a.drawables[b])}},{key:"updateView",value:function(a){h(Object.getPrototypeOf(b.prototype),"updateView",this).call(this,a);var c,d=this.drawables.length;for(c=0;d>c;c++)this.drawables[c].updateView&&this.drawables[c].updateView(this.viewProject,a)}},{key:"render",value:function(){var a,b=this.drawables.length;for(a=0;b>a;a++)this.drawables[a].draw()}},{key:"updateTime",value:function(a){h(Object.getPrototypeOf(b.prototype),"updateTime",this).call(this,a);var c,d=this.drawables.length;for(c=0;d>c;c++)this.drawables[c].updateTime(a)||(this.drawables.splice(c,1),c--,d--)}}]),b}(j["default"]);c["default"]=m,b.exports=c["default"]},{"../drawable":10,"../renderer":50}],52:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a("./gl-bound"),j=d(i),k=function(a){function b(a,c,d){e(this,b),h(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a),this.info=c;var f={MipMapLinearLinear:a.LINEAR_MIPMAP_LINEAR,Linear:a.LINEAR,MipMapLinearNearest:a.LINEAR_MIPMAP_NEAREST,MipMapNearestLinear:a.NEAREST_MIPMAP_LINEAR,Repeat:a.REPEAT,ClampToEdge:a.CLAMP_TO_EDGE},g=a.createTexture();a.bindTexture(a.TEXTURE_2D,g),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,f[c.minFilter]),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,f[c.magFilter]),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,f[c.wrapS]),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,f[c.wrapT]),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,d),/MipMap/.test(c.minFilter)&&a.generateMipmap(a.TEXTURE_2D),a.bindTexture(a.TEXTURE_2D,null),this.texture=g}return f(b,a),g(b,[{key:"use",value:function(a){var b=this._gl;a=a||0,b.bindTexture(b.TEXTURE_2D,this.texture),b.activeTexture(b.TEXTURE0+a)}},{key:"dispose",value:function(){}}]),b}(j["default"]);c["default"]=k,b.exports=c["default"]},{"./gl-bound":34}],53:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){a.lineWidth(1),a.enable(a.CULL_FACE),a.frontFace(a.CCW),a.cullFace(a.BACK),a.enable(a.DEPTH_TEST),a.blendEquation(a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.disable(a.BLEND),a.depthMask(!0)}function h(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.hasOwnProperty(d)&&(a[d]=c&&"object"==typeof a[d]&&"object"==typeof b[d]?h(a[d],b[d],c):b[d]);return a}function i(a,b){var c=b/1e3;return this.uniforms.u_baseColor[0]=Math.sin(c),this.uniforms.u_baseColor[1]=Math.sin(c+2*Math.PI/3),this.uniforms.u_baseColor[2]=Math.sin(c+4*Math.PI/3),!0}function j(a,b){var c=function(c){function d(){e(this,d),l(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,n["default"].Program.Textured,a,b)}return f(d,c),d}(p["default"]);return c}function k(a,b,c){var d,e,f="Artifact"+a+"Texture",g={};for(d=1;b>=d;d++)e=a+d,g[""+d]=j(e,f);if(c)for(d=1;b>=d;d++)e=a+"Frozen"+d,g["Frozen"+d]=j(e,f);return g}Object.defineProperty(c,"__esModule",{value:!0});var l=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}};c.resetGL=g,c.setParams=h,c.disco=i,c.generateArtifacts=k;var m=a("./constants"),n=d(m),o=a("./drawable/textured"),p=d(o)},{"./constants":9,"./drawable/textured":27}],54:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function f(a,b){d(this,f),this.name=a,this.size=b};c["default"]=e,b.exports=c["default"]},{}]},{},[38])(38)});
//# sourceMappingURL=ingress-model-viewer.min.js.map